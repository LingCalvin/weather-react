(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{74:function(t,e,n){},75:function(t,e,n){},99:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n(7),i=n.n(r),c=(n(74),n(75),n(11)),o=n.n(c),s=n(24),u=n(21),l=n(130),d=n(131),p=n(126),j=n(132),f=n(142),h=n(135),b=n(137),v=n(138),g=n(133),x=n(134),m=n(139),O=n(140),y=n(43),w=n(136);var C={getCurrentPosition:function(){return new Promise((function(t,e){return navigator.geolocation.getCurrentPosition(t,e)}))}},F=n(61),I=n(54),k=n(55),L=n(56),S=n.n(L),D=new(function(){function t(e){Object(I.a)(this,t),this.apiClient=e}return Object(k.a)(t,[{key:"getPointInfo",value:function(){var t=Object(u.a)(o.a.mark((function t(e,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiClient.get("/points/".concat(e,",").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getForecast",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,a=e.x,r=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(a,",").concat(r,"/forecast"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,a=e.x,r=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(a,",").concat(r,"/forecast/hourly"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStations",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,a=e.x,r=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(a,",").concat(r,"/stations"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.stationId,a=Object(F.a)(e,["stationId"]),t.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:a});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(S.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var N={setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){var e=localStorage.getItem(t);return null===e?null:JSON.parse(e)}};var T=n(42);function E(t,e){switch(e.type){case"updateForecast":return Object(T.a)(Object(T.a)({},t),e.payload)}}function U(t,e){Object(a.useEffect)((function(){N.setItem(t,e)}),[t,e])}var P=n(141),R=n(143),W=n(3);function B(t){var e=t.open,n=void 0!==e&&e,a=t.anchorEl,r=t.anchorOrigin,i=t.onClose,c=t.onRefreshClicked;return Object(W.jsx)(P.a,{open:n,anchorEl:a,anchorOrigin:r,onClose:i,children:Object(W.jsx)(R.a,{onClick:c,children:"Refresh"})})}var H=n(125),J=Object(H.a)((function(t){return{root:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},main:{overflowY:"auto",flexGrow:1},hourlyForecastTab:{display:"flex",flexDirection:"column",gap:t.spacing(1)},bottomNavigation:{borderTop:"1px solid",borderColor:t.palette.divider},tabPanel:{paddingLeft:t.spacing(2),paddingRight:t.spacing(2)}}})),A=n(127),G=n(128),X=n(129);function Y(t,e){switch(e){case"F":return"".concat(t,"\u2109");case"C":return"".concat(t,"\u2103");case"K":return"".concat(t,"\u212a");default:return"".concat(t)}}var K=Object(H.a)((function(t){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing(1)}}}));function M(t){var e=t.temperature,n=t.temperatureUnit,a=t.time,r=t.icon,i=K();return Object(W.jsxs)("div",{className:i.root,children:[Object(W.jsx)(p.a,{children:a.toLocaleTimeString()}),Object(W.jsx)("img",{src:r,alt:""}),Object(W.jsx)(p.a,{variant:"h6",children:Y(e,n)})]})}var $=Object(H.a)((function(t){return{gridList:{display:"grid",gridAutoFlow:"column",justifyItems:"center",gap:t.spacing(4)},gridListContainer:{display:"flex",overflowX:"auto",paddingLeft:0,paddingRight:0},spacer:{display:"inline-block",minWidth:t.spacing(4)}}}));function q(t){var e=t.periods,n=$();return Object(W.jsx)(A.a,{children:Object(W.jsxs)(G.a,{className:n.gridListContainer,children:[Object(W.jsx)("div",{className:n.spacer}),Object(W.jsx)("div",{className:n.gridList,children:e.map((function(t,n){var r=t.temperature,i=t.temperatureUnit,c=t.startTime,o=t.icon;return Object(W.jsxs)(a.Fragment,{children:[Object(W.jsx)(M,{temperature:r,temperatureUnit:i,time:new Date(c),icon:o}),n!==e.length-1&&Object(W.jsx)(X.a,{orientation:"vertical"})]},c)}))}),Object(W.jsx)("div",{className:n.spacer})]})})}function z(t){var e=t.icon,n=t.shortForecast,a=t.temperature,r=t.temperatureUnit,i=t.updateTime,c=t.station;return Object(W.jsx)(A.a,{children:Object(W.jsxs)(G.a,{children:[Object(W.jsx)(p.a,{variant:"h5",children:n}),Object(W.jsxs)(f.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(W.jsx)("img",{alt:"",src:e}),Object(W.jsx)(p.a,{variant:"h3",children:Y(a,r)})]}),i&&Object(W.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(W.jsx)(p.a,{variant:"caption",children:i.toLocaleString()})}),i&&Object(W.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(W.jsx)(p.a,{variant:"caption",children:c})})]})})}function Q(t){var e=t.currentWeather,n=t.hourlyForecast,a=t.updateTime,r=t.station;return Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(z,{icon:e.icon,shortForecast:e.shortForecast,temperature:e.temperature,temperatureUnit:e.temperatureUnit,updateTime:a,station:r}),Object(W.jsx)(q,{periods:n})]})}var V=n(4);function Z(){return{location:N.getItem("location"),city:N.getItem("city"),state:N.getItem("state"),forecast:N.getItem("forecast"),hourlyForecast:N.getItem("hourlyForecast"),stationId:N.getItem("stationId"),observation:N.getItem("observation")}}function _(){return(_=Object(u.a)(o.a.mark((function t(e){var n,a,r,i,c,s,u,l,d,p,j,f,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.getPointInfo(e.latitude,e.longitude);case 2:return n=t.sent,a=n.properties,r=a.relativeLocation.properties,i=r.city,c=r.state,s=a.gridId,u=a.gridX,l=a.gridY,t.next=12,D.getForecast({wfo:s,x:u,y:l});case 12:return d=t.sent,t.next=15,D.getHourlyForecast({wfo:s,x:u,y:l});case 15:return p=t.sent,t.next=18,D.getStations({wfo:s,x:u,y:l});case 18:return j=t.sent,f=j.features[0].properties.stationIdentifier,t.next=22,D.getStationObservations({stationId:f,limit:1});case 22:return h=t.sent,t.abrupt("return",{location:e,city:i,state:c,forecast:d,hourlyForecast:p,stationId:f,observation:h});case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function tt(){var t,e,n=J(),r=function(){var t=Object(a.useState)(window.navigator.onLine),e=Object(s.a)(t,2),n=e[0],r=e[1];return Object(a.useEffect)((function(){function t(){r(!1)}function e(){r(!0)}return window.addEventListener("offline",t),window.addEventListener("online",e),function(){window.removeEventListener("offline",t),window.removeEventListener("online",e)}}),[]),n}(),i=Object(a.useState)(!1),c=Object(s.a)(i,2),o=c[0],u=c[1],F=Object(a.useReducer)(E,void 0,Z),I=Object(s.a)(F,2),k=I[0],L=I[1],S=k.location,D=k.city,N=k.state,T=k.forecast,P=k.hourlyForecast,R=k.observation,H=k.stationId,A=null!==(t=null===R||void 0===R?void 0:R.features[0].properties)&&void 0!==t?t:null,G=Object(a.useCallback)((function(t){u(!0),function(t){return _.apply(this,arguments)}(t).then((function(t){return L({type:"updateForecast",payload:t})})).finally((function(){return u(!1)}))}),[]);Object(a.useEffect)((function(){S&&r&&G(S)}),[r,S,G]),U("location",S),U("city",D),U("state",N),U("forecast",T),U("hourlyForecast",P),U("forecastState",k),U("station",H),U("observation",R);var X=new Date,Y=new Date(X);Y.setDate(Y.getDate()+1),Y.setHours(0,0,0,0);var K=null===P||void 0===P?void 0:P.properties.periods.filter((function(t){var e=t.endTime,n=t.startTime;return new Date(e)>X&&new Date(n)<Y})),M=Object(a.useState)(null),$=Object(s.a)(M,2),q=$[0],z=$[1],tt=Object(a.useState)("hourly"),et=Object(s.a)(tt,2),nt=et[0],at=et[1];return Object(W.jsx)("div",{className:n.root,children:Object(W.jsxs)(y.a,{value:nt,children:[Object(W.jsx)(l.a,{position:"sticky",children:Object(W.jsxs)(d.a,{children:[Object(W.jsx)(p.a,{variant:"h6",children:D||N?"".concat(null!==D&&void 0!==D?D:"Unknown",", ").concat(null!==N&&void 0!==N?N:"Unknown"):"Unknown"}),Object(W.jsx)(j.a,{color:"inherit",onClick:function(){C.getCurrentPosition().then((function(t){var e=t.coords;L({type:"updateForecast",payload:{location:{latitude:e.latitude,longitude:e.longitude}}})}))},children:Object(W.jsx)(g.a,{})}),Object(W.jsx)(f.a,{className:n.spacer}),Object(W.jsx)(j.a,{color:"inherit",edge:"end",onClick:function(t){return z(t.currentTarget)},children:Object(W.jsx)(x.a,{})})]})}),Object(W.jsx)(B,{anchorEl:q,open:Boolean(q),onClose:function(){return z(null)},onRefreshClicked:function(){z(null),S&&r&&G(S)}}),o&&Object(W.jsx)(h.a,{color:"secondary"}),Object(W.jsxs)("main",{className:n.main,children:[Object(W.jsx)(w.a,{value:"hourly",className:Object(V.a)(n.tabPanel,n.hourlyForecastTab),children:A&&(null===K||void 0===K?void 0:K.length)&&Object(W.jsx)(Q,{updateTime:new Date(A.timestamp),station:null!==H&&void 0!==H?H:"",currentWeather:{icon:A.icon,shortForecast:A.textDescription,temperature:null!==(e=A.temperature.value)&&void 0!==e?e:0,temperatureUnit:"C",updateTime:new Date(A.timestamp),station:null!==H&&void 0!==H?H:""},hourlyForecast:K})}),Object(W.jsx)(w.a,{value:"daily"})]}),Object(W.jsxs)(b.a,{value:nt,onChange:function(t,e){return at(e)},showLabels:!0,className:n.bottomNavigation,children:[Object(W.jsx)(v.a,{icon:Object(W.jsx)(m.a,{}),label:"Hourly",value:"hourly"}),Object(W.jsx)(v.a,{icon:Object(W.jsx)(O.a,{}),label:"Daily",value:"daily"})]})]})})}function et(){return Object(W.jsx)("div",{className:"App",children:Object(W.jsx)(tt,{})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,145)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),i(t),c(t)}))};i.a.render(Object(W.jsx)(a.StrictMode,{children:Object(W.jsx)(et,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),nt()}},[[99,1,2]]]);
//# sourceMappingURL=main.7ce5aa98.chunk.js.map