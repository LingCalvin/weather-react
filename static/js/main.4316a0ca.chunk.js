(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{72:function(t,e,n){},73:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(7),c=n.n(o),i=(n(72),n(73),n(11)),s=n.n(i),u=n(27),l=n(21),f=n(124),p=n(125),d=n(122),h=n(126),j=n(131),v=n(129),b=n(127),g=n(128);var O={getCurrentPosition:function(){return new Promise((function(t,e){return navigator.geolocation.getCurrentPosition(t,e)}))}},x=n(57),w=n(50),y=n(51),m=n(52),I=n.n(m),k=new(function(){function t(e){Object(w.a)(this,t),this.apiClient=e}return Object(y.a)(t,[{key:"getPointInfo",value:function(){var t=Object(l.a)(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiClient.get("/points/".concat(e,",").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getForecast",value:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStations",value:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var t=Object(l.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.stationId,r=Object(x.a)(e,["stationId"]),t.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(I.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var C={setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){var e=localStorage.getItem(t);return null===e?null:JSON.parse(e)}};var F=n(119),S=n(121);function E(t,e){switch(e){case"F":return"".concat(t,"\u2109");case"C":return"".concat(t,"\u2103");case"K":return"".concat(t,"\u212a");default:return"".concat(t)}}var L=n(4);function P(t){var e=t.icon,n=t.shortForecast,r=t.temperature,a=t.temperatureUnit,o=t.updateTime;return Object(L.jsx)(F.a,{children:Object(L.jsxs)(S.a,{children:[Object(L.jsx)(d.a,{variant:"h5",children:n}),Object(L.jsxs)(j.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(L.jsx)("img",{alt:"",src:e}),Object(L.jsx)(d.a,{variant:"h3",children:E(r,a)})]}),o&&Object(L.jsx)(j.a,{display:"flex",justifyContent:"flex-end",children:Object(L.jsx)(d.a,{variant:"caption",children:o.toLocaleString()})})]})})}var N=n(40);function U(t,e){switch(e.type){case"updateForecast":return Object(N.a)(Object(N.a)({},t),e.payload)}}function R(t,e){Object(r.useEffect)((function(){C.setItem(t,e)}),[t,e])}var T=n(130),B=n(132);function J(t){var e=t.open,n=void 0!==e&&e,r=t.anchorEl,a=t.anchorOrigin,o=t.onClose,c=t.onRefreshClicked;return Object(L.jsx)(T.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:o,children:Object(L.jsx)(B.a,{onClick:c,children:"Refresh"})})}var D=n(123),A=Object(D.a)({spacer:{flexGrow:1}});function H(){return{location:C.getItem("location"),city:C.getItem("city"),state:C.getItem("state"),forecast:C.getItem("forecast"),hourlyForecast:C.getItem("hourlyForecast"),stationId:C.getItem("stationId"),observation:C.getItem("observation")}}function M(){return(M=Object(l.a)(s.a.mark((function t(e){var n,r,a,o,c,i,u,l,f,p,d,h,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.getPointInfo(e.latitude,e.longitude);case 2:return n=t.sent,r=n.properties,a=r.relativeLocation.properties,o=a.city,c=a.state,i=r.gridId,u=r.gridX,l=r.gridY,t.next=12,k.getForecast({wfo:i,x:u,y:l});case 12:return f=t.sent,t.next=15,k.getHourlyForecast({wfo:i,x:u,y:l});case 15:return p=t.sent,t.next=18,k.getStations({wfo:i,x:u,y:l});case 18:return d=t.sent,h=d.features[0].properties.stationIdentifier,t.next=22,k.getStationObservations({stationId:h,limit:1});case 22:return j=t.sent,t.abrupt("return",{location:e,city:o,state:c,forecast:f,hourlyForecast:p,stationId:h,observation:j});case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function W(){var t,e,n=A(),a=function(){var t=Object(r.useState)(window.navigator.onLine),e=Object(u.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){function t(){a(!1)}function e(){a(!0)}return window.addEventListener("offline",t),window.addEventListener("online",e),function(){window.removeEventListener("offline",t),window.removeEventListener("online",e)}}),[]),n}(),o=Object(r.useState)(!1),c=Object(u.a)(o,2),i=c[0],s=c[1],l=Object(r.useReducer)(U,void 0,H),x=Object(u.a)(l,2),w=x[0],y=x[1],m=w.location,I=w.city,k=w.state,C=w.forecast,F=w.hourlyForecast,S=w.observation,E=w.stationId,N=null!==(t=null===S||void 0===S?void 0:S.features[0].properties)&&void 0!==t?t:null,T=Object(r.useCallback)((function(t){s(!0),function(t){return M.apply(this,arguments)}(t).then((function(t){return y({type:"updateForecast",payload:t})})).finally((function(){return s(!1)}))}),[]);Object(r.useEffect)((function(){m&&a&&T(m)}),[a,m,T]),R("location",m),R("city",I),R("state",k),R("forecast",C),R("hourlyForecast",F),R("forecastState",w),R("station",E),R("observation",S);var B=Object(r.useState)(null),D=Object(u.a)(B,2),W=D[0],G=D[1];return Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)(f.a,{position:"sticky",children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(d.a,{variant:"h6",children:I||k?"".concat(null!==I&&void 0!==I?I:"Unknown",", ").concat(null!==k&&void 0!==k?k:"Unknown"):"Unknown"}),Object(L.jsx)(h.a,{color:"inherit",onClick:function(){O.getCurrentPosition().then((function(t){var e=t.coords;y({type:"updateForecast",payload:{location:{latitude:e.latitude,longitude:e.longitude}}})}))},children:Object(L.jsx)(b.a,{})}),Object(L.jsx)(j.a,{className:n.spacer}),Object(L.jsx)(h.a,{color:"inherit",edge:"end",onClick:function(t){return G(t.currentTarget)},children:Object(L.jsx)(g.a,{})})]})}),Object(L.jsx)(J,{anchorEl:W,open:Boolean(W),onClose:function(){return G(null)},onRefreshClicked:function(){G(null),m&&a&&T(m)}}),i&&Object(L.jsx)(v.a,{color:"secondary"}),null!==N&&Object(L.jsx)(P,{temperature:Math.round(null!==(e=N.temperature.value)&&void 0!==e?e:NaN),temperatureUnit:"C",icon:N.icon,shortForecast:N.textDescription,updateTime:new Date(N.timestamp)})]})}function G(){return Object(L.jsx)("div",{className:"App",children:Object(L.jsx)(W,{})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,134)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),o(t),c(t)}))};c.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(G,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),K()}},[[97,1,2]]]);
//# sourceMappingURL=main.4316a0ca.chunk.js.map