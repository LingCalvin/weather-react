(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{72:function(t,e,n){},73:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n(7),c=n.n(a),i=(n(72),n(73),n(11)),o=n.n(i),s=n(28),u=n(21),l=n(125),d=n(126),p=n(122),f=n(127),j=n(132),h=n(130),v=n(128),b=n(129);var g={getCurrentPosition:function(){return new Promise((function(t,e){return navigator.geolocation.getCurrentPosition(t,e)}))}},m=n(57),x=n(50),O=n(51),w=n(52),y=n.n(w),I=new(function(){function t(e){Object(x.a)(this,t),this.apiClient=e}return Object(O.a)(t,[{key:"getPointInfo",value:function(){var t=Object(u.a)(o.a.mark((function t(e,n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiClient.get("/points/".concat(e,",").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getForecast",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStations",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.stationId,r=Object(m.a)(e,["stationId"]),t.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(y.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var C={setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){var e=localStorage.getItem(t);return null===e?null:JSON.parse(e)}};var k=n(119),F=n(121);function L(t,e){switch(e){case"F":return"".concat(t,"\u2109");case"C":return"".concat(t,"\u2103");case"K":return"".concat(t,"\u212a");default:return"".concat(t)}}var S=n(3);function D(t){var e=t.icon,n=t.shortForecast,r=t.temperature,a=t.temperatureUnit,c=t.updateTime;return Object(S.jsx)(k.a,{children:Object(S.jsxs)(F.a,{children:[Object(S.jsx)(p.a,{variant:"h5",children:n}),Object(S.jsxs)(j.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(S.jsx)("img",{alt:"",src:e}),Object(S.jsx)(p.a,{variant:"h3",children:L(r,a)})]}),c&&Object(S.jsx)(j.a,{display:"flex",justifyContent:"flex-end",children:Object(S.jsx)(p.a,{variant:"caption",children:c.toLocaleString()})})]})})}var N=n(40);function E(t,e){switch(e.type){case"updateForecast":return Object(N.a)(Object(N.a)({},t),e.payload)}}function T(t,e){Object(r.useEffect)((function(){C.setItem(t,e)}),[t,e])}var U=n(131),P=n(133);function R(t){var e=t.open,n=void 0!==e&&e,r=t.anchorEl,a=t.anchorOrigin,c=t.onClose,i=t.onRefreshClicked;return Object(S.jsx)(U.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:c,children:Object(S.jsx)(P.a,{onClick:i,children:"Refresh"})})}var B=n(123),J=Object(B.a)((function(t){return{spacer:{flexGrow:1},main:{display:"flex",flexDirection:"column",gap:t.spacing(1)}}})),A=n(124),H=Object(B.a)((function(t){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing(1)}}}));function W(t){var e=t.temperature,n=t.temperatureUnit,r=t.time,a=t.icon,c=H();return Object(S.jsxs)("div",{className:c.root,children:[Object(S.jsx)(p.a,{children:r.toLocaleTimeString()}),Object(S.jsx)("img",{src:a,alt:""}),Object(S.jsx)(p.a,{variant:"h6",children:L(e,n)})]})}var M=Object(B.a)((function(t){return{gridList:{display:"grid",gridAutoFlow:"column",justifyItems:"center",gap:t.spacing(4)},gridListContainer:{display:"flex",overflowX:"auto",paddingLeft:0,paddingRight:0},spacer:{display:"inline-block",minWidth:t.spacing(4)}}}));function X(t){var e=t.periods,n=M();return Object(S.jsx)(k.a,{children:Object(S.jsxs)(F.a,{className:n.gridListContainer,children:[Object(S.jsx)("div",{className:n.spacer}),Object(S.jsx)("div",{className:n.gridList,children:e.map((function(t,n){var a=t.temperature,c=t.temperatureUnit,i=t.startTime,o=t.icon;return Object(S.jsxs)(r.Fragment,{children:[Object(S.jsx)(W,{temperature:a,temperatureUnit:c,time:new Date(i),icon:o}),n!==e.length-1&&Object(S.jsx)(A.a,{orientation:"vertical"})]},i)}))}),Object(S.jsx)("div",{className:n.spacer})]})})}function G(){return{location:C.getItem("location"),city:C.getItem("city"),state:C.getItem("state"),forecast:C.getItem("forecast"),hourlyForecast:C.getItem("hourlyForecast"),stationId:C.getItem("stationId"),observation:C.getItem("observation")}}function K(){return(K=Object(u.a)(o.a.mark((function t(e){var n,r,a,c,i,s,u,l,d,p,f,j,h;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getPointInfo(e.latitude,e.longitude);case 2:return n=t.sent,r=n.properties,a=r.relativeLocation.properties,c=a.city,i=a.state,s=r.gridId,u=r.gridX,l=r.gridY,t.next=12,I.getForecast({wfo:s,x:u,y:l});case 12:return d=t.sent,t.next=15,I.getHourlyForecast({wfo:s,x:u,y:l});case 15:return p=t.sent,t.next=18,I.getStations({wfo:s,x:u,y:l});case 18:return f=t.sent,j=f.features[0].properties.stationIdentifier,t.next=22,I.getStationObservations({stationId:j,limit:1});case 22:return h=t.sent,t.abrupt("return",{location:e,city:c,state:i,forecast:d,hourlyForecast:p,stationId:j,observation:h});case 24:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Y(){var t,e,n=J(),a=function(){var t=Object(r.useState)(window.navigator.onLine),e=Object(s.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){function t(){a(!1)}function e(){a(!0)}return window.addEventListener("offline",t),window.addEventListener("online",e),function(){window.removeEventListener("offline",t),window.removeEventListener("online",e)}}),[]),n}(),c=Object(r.useState)(!1),i=Object(s.a)(c,2),o=i[0],u=i[1],m=Object(r.useReducer)(E,void 0,G),x=Object(s.a)(m,2),O=x[0],w=x[1],y=O.location,I=O.city,C=O.state,k=O.forecast,F=O.hourlyForecast,L=O.observation,N=O.stationId,U=null!==(t=null===L||void 0===L?void 0:L.features[0].properties)&&void 0!==t?t:null,P=Object(r.useCallback)((function(t){u(!0),function(t){return K.apply(this,arguments)}(t).then((function(t){return w({type:"updateForecast",payload:t})})).finally((function(){return u(!1)}))}),[]);Object(r.useEffect)((function(){y&&a&&P(y)}),[a,y,P]),T("location",y),T("city",I),T("state",C),T("forecast",k),T("hourlyForecast",F),T("forecastState",O),T("station",N),T("observation",L);var B=new Date,A=new Date(B);A.setDate(A.getDate()+1),A.setHours(0,0,0,0);var H=null===F||void 0===F?void 0:F.properties.periods.filter((function(t){var e=t.endTime,n=t.startTime;return new Date(e)>B&&new Date(n)<A})),W=Object(r.useState)(null),M=Object(s.a)(W,2),Y=M[0],$=M[1];return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(l.a,{position:"sticky",children:Object(S.jsxs)(d.a,{children:[Object(S.jsx)(p.a,{variant:"h6",children:I||C?"".concat(null!==I&&void 0!==I?I:"Unknown",", ").concat(null!==C&&void 0!==C?C:"Unknown"):"Unknown"}),Object(S.jsx)(f.a,{color:"inherit",onClick:function(){g.getCurrentPosition().then((function(t){var e=t.coords;w({type:"updateForecast",payload:{location:{latitude:e.latitude,longitude:e.longitude}}})}))},children:Object(S.jsx)(v.a,{})}),Object(S.jsx)(j.a,{className:n.spacer}),Object(S.jsx)(f.a,{color:"inherit",edge:"end",onClick:function(t){return $(t.currentTarget)},children:Object(S.jsx)(b.a,{})})]})}),Object(S.jsx)(R,{anchorEl:Y,open:Boolean(Y),onClose:function(){return $(null)},onRefreshClicked:function(){$(null),y&&a&&P(y)}}),o&&Object(S.jsx)(h.a,{color:"secondary"}),Object(S.jsxs)("main",{className:n.main,children:[null!==U&&Object(S.jsx)(D,{temperature:Math.round(null!==(e=U.temperature.value)&&void 0!==e?e:NaN),temperatureUnit:"C",icon:U.icon,shortForecast:U.textDescription,updateTime:new Date(U.timestamp)}),Object(S.jsx)(X,{periods:null!==H&&void 0!==H?H:[]})]})]})}function $(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(Y,{})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var q=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};c.a.render(Object(S.jsx)(r.StrictMode,{children:Object(S.jsx)($,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),q()}},[[97,1,2]]]);
//# sourceMappingURL=main.e7bee57b.chunk.js.map