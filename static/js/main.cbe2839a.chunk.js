(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(8),i=n.n(a),c=(n(84),n(20)),o=n(70),s=n(7),u=(n(85),n(13)),l=n.n(u),d=n(26),j=n(144),f=n(145),p=n(50),h=n(146),v=n(159),b=n(149),O=n(151),x=n(152),m=n(147),g=n(148),y=n(153),w=n(154),C=n(54),S=n(150);var T={getCurrentPosition:function(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}},k=n(33),I=n(44),E=n(45),F=n(65),P=n.n(F),H=n(19);function N(e,t){var n=Object(H.a)({},e);return t.forEach((function(e,t){t!==e&&n.hasOwnProperty(t)&&(n[e]=n[t],delete n[t])})),n}var D=new Map([["messageType","message_type"],["regionType","region_type"]]),M=new(function(){function e(t){Object(I.a)(this,e),this.apiClient=t}return Object(E.a)(e,[{key:"getActiveAlerts",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/alerts/active",{params:N(t,D)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPointInfo",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/points/".concat(t,",").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stationId,r=Object(k.a)(t,["stationId"]),e.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(P.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var U={setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem(e);return null===t?null:JSON.parse(t)}};function L(e,t){switch(t.type){case"updateForecast":return Object(H.a)(Object(H.a)({},e),t.payload)}}var A=n(158),K=n(139),R=n(2);function B(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.onClose,c=e.onRefreshClicked,o=e.onSettingsClicked;return Object(R.jsxs)(A.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:i,children:[Object(R.jsx)(K.a,{onClick:c,children:"Refresh"}),Object(R.jsx)(K.a,{onClick:o,children:"Settings"})]})}var W,_=n(140),G=Object(_.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},main:{overflowY:"auto",flexGrow:1},hourlyForecastPage:{display:"flex",flexDirection:"column",gap:e.spacing(1)},bottomNavigation:{borderTop:"1px solid",borderColor:e.palette.divider,minHeight:"56px"}}})),J=n(141),z=n(142),X=n(143);function Y(e){var t=e.value;switch(e.unit){case W.Celsius:return"".concat(t,"\u2103");case W.Fahrenheit:return"".concat(t,"\u2109");case W.Kelvin:return"".concat(t,"\u212a");default:return"".concat(t)}}function V(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case W.Celsius:return{value:t+273.15,unit:W.Kelvin};case W.Fahrenheit:return{value:5*(t-32)/9+273.15,unit:W.Kelvin};case W.Kelvin:return{value:t,unit:n}}}(e).value;switch(t){case W.Celsius:return{value:n-273.15,unit:t};case W.Fahrenheit:return{value:9*(n-273.15)/5+32,unit:t};case W.Kelvin:return{value:n,unit:t}}}!function(e){e.Celsius="CELSIUS",e.Fahrenheit="FAHRENHEIT",e.Kelvin="KELVIN"}(W||(W={}));var $=Object(_.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}}}));function q(e){var t=e.temperature,n=e.time,r=e.icon,a=$();return Object(R.jsxs)("div",{className:a.root,children:[Object(R.jsx)(p.a,{children:n.toLocaleTimeString()}),Object(R.jsx)("img",{src:r,alt:""}),Object(R.jsx)(p.a,{variant:"h6",children:Y(t)})]})}var Q,Z=Object(_.a)((function(e){var t=e.spacing(2);return{gridList:{display:"grid",gridAutoFlow:"column",justifyItems:"center",gap:t},gridListContainer:{display:"flex",overflowX:"auto",paddingLeft:0,paddingRight:0},spacer:{display:"inline-block",minWidth:t}}}));function ee(e){var t=e.periods,n=Z();return Object(R.jsx)(J.a,{children:Object(R.jsxs)(z.a,{className:n.gridListContainer,children:[Object(R.jsx)("div",{className:n.spacer}),Object(R.jsx)("div",{className:n.gridList,children:t.map((function(e,n){var a=e.temperature,i=(e.temperatureUnit,e.startTime),c=e.icon;return Object(R.jsxs)(r.Fragment,{children:[Object(R.jsx)(q,{temperature:{value:a,unit:W.Fahrenheit},time:new Date(i),icon:c}),n!==t.length-1&&Object(R.jsx)(X.a,{orientation:"vertical"})]},i)}))}),Object(R.jsx)("div",{className:n.spacer})]})})}function te(e){var t=e.value;switch(e.unit){case Q.KilometersPerHour:return"".concat(t," km/h");case Q.MetersPerSecond:return"".concat(t," m/s");case Q.MilesPerHour:return"".concat(t," mph");default:return"".concat(t)}}function ne(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case Q.KilometersPerHour:return{value:t/3.6,unit:Q.MetersPerSecond};case Q.MetersPerSecond:return{value:t,unit:n};case Q.MilesPerHour:return{value:t/2.237,unit:Q.MetersPerSecond}}}(e).value;switch(t){case Q.KilometersPerHour:return{value:3.6*n,unit:t};case Q.MetersPerSecond:return{value:n,unit:t};case Q.MilesPerHour:return{value:2.237*n,unit:t}}}function re(e){var t=e.icon,n=e.shortForecast,r=e.temperature,a=e.windSpeed,i=e.relativeHumidity,c=e.updateTime,o=e.station;return Object(R.jsx)(J.a,{children:Object(R.jsxs)(z.a,{children:[Object(R.jsx)(p.a,{variant:"h5",children:n}),Object(R.jsxs)(v.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(R.jsx)("img",{alt:"",src:t}),Object(R.jsxs)(v.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[Object(R.jsx)(p.a,{variant:"h3",children:Y(r)}),void 0!==i&&Object(R.jsx)(p.a,{children:"Humidity: ".concat(Math.round(i),"%")}),void 0!==a&&Object(R.jsx)(p.a,{children:"Wind: ".concat(te(a))})]})]}),c&&Object(R.jsx)(v.a,{display:"flex",justifyContent:"flex-end",children:Object(R.jsx)(p.a,{variant:"caption",children:c.toLocaleString()})}),c&&Object(R.jsx)(v.a,{display:"flex",justifyContent:"flex-end",children:Object(R.jsx)(p.a,{variant:"caption",children:o})})]})})}function ae(e){var t=e.currentWeather,n=e.hourlyForecast,r=e.updateTime,a=e.station,i=e.className;return Object(R.jsxs)("div",{className:i,children:[Object(R.jsx)(re,{icon:t.icon,shortForecast:t.shortForecast,temperature:t.temperature,windSpeed:t.windSpeed,relativeHumidity:t.relativeHumidity,updateTime:r,station:a}),Object(R.jsx)(ee,{periods:n})]})}!function(e){e.KilometersPerHour="KILOMETERS_PER_HOUR",e.MetersPerSecond="METERS_PER_SECOND",e.MilesPerHour="MILES_PER_HOUR"}(Q||(Q={}));var ie=n(40),ce={speedUnit:Q.MilesPerHour,temperatureUnit:W.Fahrenheit},oe=Object(r.createContext)(ce),se=Object(_.a)((function(e){return{cardContent:{display:"flex",flexDirection:"column",gap:e.spacing(2)},forecastTile:{display:"grid",gridTemplateAreas:'\n    "forecastTileTitle forecastTileTitle forecastTileTitle"\n    "forecastTileIcon forecastTileDescription forecastTileTemperature"\n    ',alignItems:"center"},forecastTileTitle:{gridArea:"forecastTileTitle",justifySelf:"start"},forecastTileIcon:{gridArea:"forecastTileIcon"},forecastTileDescription:{gridArea:"forecastTileDescription"},forecastTileTemperature:{gridArea:"forecastTileTemperature",justifySelf:"end"}}}));function ue(e){var t=e.forecast,n=se();return Object(R.jsx)(J.a,{children:Object(R.jsx)(z.a,{className:n.cardContent,children:t.map((function(e){return Object(R.jsxs)("div",{className:n.forecastTile,children:[Object(R.jsx)(p.a,{className:n.forecastTileTitle,variant:"h6",children:e.name}),Object(R.jsx)("img",{className:n.forecastTileIcon,src:e.icon,alt:""}),Object(R.jsx)(p.a,{className:n.forecastTileDescription,children:e.shortForecast}),Object(R.jsx)(p.a,{variant:"h6",className:n.forecastTileTemperature,children:e.temperature})]})}))})})}function le(){var e;return null!==(e=U.getItem("cachedForecast"))&&void 0!==e?e:{location:null,city:null,state:null,forecast:null,hourlyForecast:null,stationId:null,observation:null}}function de(){return(de=Object(d.a)(l.a.mark((function e(t){var n,r,a,i,c,o,s,u,d,j,f,p,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getPointInfo(t.latitude,t.longitude);case 2:return n=e.sent,r=n.properties,a=r.relativeLocation.properties,i=a.city,c=a.state,o=r.gridId,s=r.gridX,u=r.gridY,e.next=12,M.getForecast({wfo:o,x:s,y:u});case 12:return d=e.sent,e.next=15,M.getHourlyForecast({wfo:o,x:s,y:u});case 15:return j=e.sent,e.next=18,M.getStations({wfo:o,x:s,y:u});case 18:return f=e.sent,p=f.features[0].properties.stationIdentifier,e.next=22,M.getStationObservations({stationId:p,limit:1});case 22:return h=e.sent,e.abrupt("return",{location:t,city:i,state:c,forecast:d,hourlyForecast:j,stationId:p,observation:h});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){var e,t,n,a,i,o,u=G(),l=Object(s.f)(),d=Object(r.useContext)(oe),I=d.speedUnit,E=d.temperatureUnit,F=function(){var e=Object(r.useState)(window.navigator.onLine),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(!1)}function t(){a(!0)}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}(),P=Object(r.useState)(!1),N=Object(c.a)(P,2),D=N[0],M=N[1],A=Object(r.useReducer)(L,void 0,le),K=Object(c.a)(A,2),_=K[0],J=K[1],z=_.location,X=_.city,Y=_.state,$=_.forecast,q=_.hourlyForecast,Z=_.observation,ee=_.stationId,te=null!==(e=null===Z||void 0===Z?void 0:Z.features[0].properties)&&void 0!==e?e:null,re=Object(r.useCallback)((function(e){M(!0),function(e){return de.apply(this,arguments)}(e).then((function(e){return J({type:"updateForecast",payload:e})})).finally((function(){return M(!1)}))}),[]);Object(r.useEffect)((function(){z&&F&&re(z)}),[F,z,re]),i="cachedForecast",o=_,Object(r.useEffect)((function(){U.setItem(i,o)}),[i,o]);var ce=new Date,se=new Date(ce);se.setDate(se.getDate()+1),se.setHours(0,0,0,0);var je,fe,pe=null===q||void 0===q?void 0:q.properties.periods.filter((function(e){var t=e.endTime,n=e.startTime;return new Date(t)>ce&&new Date(n)<se})),he=Object(r.useState)(null),ve=Object(c.a)(he,2),be=ve[0],Oe=ve[1],xe=Object(r.useState)("hourly"),me=Object(c.a)(xe,2),ge=me[0],ye=me[1];return Object(R.jsx)("div",{className:u.root,children:Object(R.jsxs)(C.a,{value:ge,children:[Object(R.jsx)(j.a,{position:"sticky",children:Object(R.jsxs)(f.a,{children:[Object(R.jsx)(p.a,{variant:"h6",children:X||Y?"".concat(null!==X&&void 0!==X?X:"Unknown",", ").concat(null!==Y&&void 0!==Y?Y:"Unknown"):"Unknown"}),Object(R.jsx)(h.a,{color:"inherit",onClick:function(){T.getCurrentPosition().then((function(e){var t=e.coords;J({type:"updateForecast",payload:{location:{latitude:t.latitude,longitude:t.longitude}}})}))},children:Object(R.jsx)(m.a,{})}),Object(R.jsx)(v.a,{className:u.spacer}),Object(R.jsx)(h.a,{color:"inherit",edge:"end",onClick:function(e){return Oe(e.currentTarget)},children:Object(R.jsx)(g.a,{})})]})}),Object(R.jsx)(B,{anchorEl:be,open:Boolean(be),onClose:function(){return Oe(null)},onRefreshClicked:function(){Oe(null),z&&F&&re(z)},onSettingsClicked:function(){Oe(null),l.push(ie.SETTINGS)}}),D&&Object(R.jsx)(b.a,{color:"secondary"}),Object(R.jsxs)("main",{className:u.main,children:[Object(R.jsx)(S.a,{value:"hourly",children:te&&(null===pe||void 0===pe?void 0:pe.length)&&Object(R.jsx)(ae,{className:u.hourlyForecastPage,updateTime:new Date(te.timestamp),station:null!==ee&&void 0!==ee?ee:"",currentWeather:{icon:te.icon,shortForecast:te.textDescription,temperature:(fe={value:null!==(t=te.temperature.value)&&void 0!==t?t:0,unit:W.Celsius},function(e){var t=e.value,n=Object(k.a)(e,["value"]);return Object(H.a)({value:Math.round(t)},n)}(V(fe,E))),windSpeed:null!==te.windSpeed.value?(je={value:te.windSpeed.value,unit:Q.KilometersPerHour},function(e){var t=e.value,n=Object(k.a)(e,["value"]);return Object(H.a)({value:Math.round(t)},n)}(ne(je,I))):void 0,relativeHumidity:null!==(n=te.relativeHumidity.value)&&void 0!==n?n:void 0},hourlyForecast:pe})}),Object(R.jsx)(S.a,{value:"daily",children:Object(R.jsx)(ue,{forecast:null!==(a=null===$||void 0===$?void 0:$.properties.periods)&&void 0!==a?a:[]})})]}),Object(R.jsxs)(O.a,{value:ge,onChange:function(e,t){return ye(t)},showLabels:!0,className:u.bottomNavigation,children:[Object(R.jsx)(x.a,{icon:Object(R.jsx)(y.a,{}),label:"Hourly",value:"hourly"}),Object(R.jsx)(x.a,{icon:Object(R.jsx)(w.a,{}),label:"Daily",value:"daily"})]})]})})}var fe=n(138),pe=n(156),he=n(114),ve=n(157),be=n(155);function Oe(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.children,c=e.onClose;return Object(R.jsx)(A.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:c,children:i})}var xe=Object(r.createContext)((function(){}));function me(e){switch(e){case Q.KilometersPerHour:return"Kilometers per hour";case Q.MetersPerSecond:return"Meters per second";case Q.MilesPerHour:return"Miles per hour"}}function ge(e){switch(e){case W.Celsius:return"Celsius";case W.Fahrenheit:return"Fahrenheit";case W.Kelvin:return"Kelvin"}}var ye=Object(_.a)((function(e){return{listSubHeader:{color:e.palette.primary.main,fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,textAlign:"start"}}})),we=Object.keys(Q).map((function(e){return Q[e]})),Ce=Object.keys(W).map((function(e){return W[e]}));function Se(){var e=ye(),t=Object(s.f)(),n=Object(r.useContext)(xe),a=Object(r.useState)(null),i=Object(c.a)(a,2),o=i[0],u=i[1],l=Object(r.useState)(null),d=Object(c.a)(l,2),v=d[0],b=d[1],O=Object(r.useContext)(oe),x=O.speedUnit,m=O.temperatureUnit;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(j.a,{position:"sticky",children:Object(R.jsxs)(f.a,{children:[Object(R.jsx)(h.a,{edge:"start",color:"inherit",onClick:function(){return t.goBack()},children:Object(R.jsx)(be.a,{})}),Object(R.jsx)(p.a,{variant:"h6",children:"Settings"})]})}),Object(R.jsx)(Oe,{anchorEl:o,open:Boolean(o),onClose:function(){return u(null)},children:we.map((function(e){return Object(R.jsx)(K.a,{onClick:function(){n({speedUnit:e}),u(null)},children:me(e)})}))}),Object(R.jsx)(Oe,{anchorEl:v,open:Boolean(v),onClose:function(){return b(null)},children:Ce.map((function(e){return Object(R.jsx)(K.a,{onClick:function(){n({temperatureUnit:e}),b(null)},children:ge(e)})}))}),Object(R.jsxs)(fe.a,{children:[Object(R.jsx)(pe.a,{inset:!0,className:e.listSubHeader,children:"Units"}),Object(R.jsx)(he.a,{button:!0,onClick:function(e){var t,n;return u(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(R.jsx)(ve.a,{inset:!0,primary:"Speed unit",secondary:me(x)})}),Object(R.jsx)(he.a,{button:!0,onClick:function(e){var t,n;return b(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(R.jsx)(ve.a,{inset:!0,primary:"Temperature unit",secondary:ge(m)})})]})]})}function Te(e,t){var n=t.type,r=t.update;switch(n){case"update":return Object(H.a)(Object(H.a)({},e),r)}}function ke(e){return"userPreferences::".concat(e)}var Ie=new(function(){function e(){Object(I.a)(this,e)}return Object(E.a)(e,[{key:"save",value:function(e,t){U.setItem(ke(e),t)}},{key:"load",value:function(e){var t;return null!==(t=U.getItem(ke(e)))&&void 0!==t?t:null}},{key:"loadOrDefault",value:function(e,t){var n;return null!==(n=U.getItem(ke(e)))&&void 0!==n?n:t}},{key:"loadAllOrDefault",value:function(){return{speedUnit:this.loadOrDefault("speedUnit",ce.speedUnit),temperatureUnit:this.loadOrDefault("temperatureUnit",ce.temperatureUnit)}}}]),e}());function Ee(){var e=Object(r.useReducer)(Te,Ie.loadAllOrDefault()),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(R.jsx)(oe.Provider,{value:n,children:Object(R.jsx)(xe.Provider,{value:function(e){Object.keys(e).forEach((function(t){Ie.save(t,e[t])})),a({type:"update",update:e})},children:Object(R.jsx)("div",{className:"App",children:Object(R.jsx)(o.a,{children:Object(R.jsxs)(s.c,{children:[Object(R.jsx)(s.a,{path:ie.DASHBOARD,exact:!0,children:Object(R.jsx)(je,{})}),Object(R.jsx)(s.a,{path:ie.SETTINGS,children:Object(R.jsx)(Se,{})})]})})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};i.a.render(Object(R.jsx)(r.StrictMode,{children:Object(R.jsx)(Ee,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Fe()},40:function(e){e.exports=JSON.parse('{"DASHBOARD":"/","SETTINGS":"/settings"}')},84:function(e,t,n){},85:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.cbe2839a.chunk.js.map