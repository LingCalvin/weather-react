(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{58:function(t,e,n){},59:function(t,e,n){},84:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=(n(58),n(59),n(8)),s=n.n(i),u=n(14),l=n(26),f=n(100),p=n(101),d=n(99),h=n(104),v=n(106);var j={getCurrentPosition:function(){return new Promise((function(t,e){return navigator.geolocation.getCurrentPosition(t,e)}))}},g=n(44),b=n(37),w=n(38),x=n(39),y=n.n(x),m=new(function(){function t(e){Object(b.a)(this,t),this.apiClient=e}return Object(w.a)(t,[{key:"getPointInfo",value:function(){var t=Object(u.a)(s.a.mark((function t(e,n){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiClient.get("/points/".concat(e,",").concat(n));case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getForecast",value:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStations",value:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.wfo,r=e.x,a=e.y,t.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var t=Object(u.a)(s.a.mark((function t(e){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.stationId,r=Object(g.a)(e,["stationId"]),t.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}())(y.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var O={setItem:function(t,e){localStorage.setItem(t,JSON.stringify(e))},getItem:function(t){var e=localStorage.getItem(t);return null===e?null:JSON.parse(e)}};var I=n(97),k=n(98),F=n(103);function C(t,e){switch(e){case"F":return"".concat(t,"\u2109");case"C":return"".concat(t,"\u2103");case"K":return"".concat(t,"\u212a");default:return"".concat(t)}}var S=n(3);function L(t){var e=t.icon,n=t.shortForecast,r=t.temperature,a=t.temperatureUnit,o=t.updateTime;return Object(S.jsx)(I.a,{children:Object(S.jsxs)(k.a,{children:[Object(S.jsx)(d.a,{variant:"h5",children:n}),Object(S.jsxs)(F.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(S.jsx)("img",{alt:"",src:e}),Object(S.jsx)(d.a,{variant:"h3",children:C(r,a)})]}),o&&Object(S.jsx)(F.a,{display:"flex",justifyContent:"flex-end",children:Object(S.jsx)(d.a,{variant:"caption",children:o.toLocaleString()})})]})})}var E=n(28);function P(t,e){switch(e.type){case"updateForecast":return Object(E.a)(Object(E.a)({},t),e.payload)}}function U(t,e){Object(r.useEffect)((function(){O.setItem(t,e)}),[t,e])}function N(){return{location:O.getItem("location"),city:O.getItem("city"),state:O.getItem("state"),forecast:O.getItem("forecast"),hourlyForecast:O.getItem("hourlyForecast"),stationId:O.getItem("stationId"),observation:O.getItem("observation")}}function J(){var t,e,n=function(){var t=Object(r.useState)(window.navigator.onLine),e=Object(l.a)(t,2),n=e[0],a=e[1];return Object(r.useEffect)((function(){function t(){a(!1)}function e(){a(!0)}return window.addEventListener("offline",t),window.addEventListener("online",e),function(){window.removeEventListener("offline",t),window.removeEventListener("online",e)}}),[]),n}(),a=Object(r.useReducer)(P,void 0,N),o=Object(l.a)(a,2),c=o[0],i=o[1],g=c.location,b=c.city,w=c.state,x=c.forecast,y=c.hourlyForecast,O=c.observation,I=null!==(t=null===O||void 0===O?void 0:O.features[0].properties)&&void 0!==t?t:null;Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(s.a.mark((function t(){var e,r,a,o,c,u,l,f,p,d,h,v,j;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g&&n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,m.getPointInfo(g.latitude,g.longitude);case 4:return e=t.sent,r=e.properties,a=r.relativeLocation.properties,o=a.city,c=a.state,u=r.gridId,l=r.gridX,f=r.gridY,t.next=14,m.getForecast({wfo:u,x:l,y:f});case 14:return p=t.sent,t.next=17,m.getHourlyForecast({wfo:u,x:l,y:f});case 17:return d=t.sent,t.next=20,m.getStations({wfo:u,x:l,y:f});case 20:return h=t.sent,v=h.features[0].properties.stationIdentifier,t.next=24,m.getStationObservations({stationId:v,limit:1});case 24:j=t.sent,i({type:"updateForecast",payload:{city:o,state:c,forecast:p,hourlyForecast:d,stationId:v,observation:j}});case 26:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[n,g]),U("location",g),U("city",b),U("state",w),U("forecast",x),U("hourlyForecast",y),U("forecastState",c);return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(f.a,{position:"sticky",children:Object(S.jsxs)(p.a,{children:[Object(S.jsx)(d.a,{variant:"h6",children:b||w?"".concat(null!==b&&void 0!==b?b:"Unknown",", ").concat(null!==w&&void 0!==w?w:"Unknown"):"Unknown"}),Object(S.jsx)(h.a,{color:"inherit",onClick:function(){j.getCurrentPosition().then((function(t){var e=t.coords;i({type:"updateForecast",payload:{location:{latitude:e.latitude,longitude:e.longitude}}})}))},children:Object(S.jsx)(v.a,{})})]})}),null!==I&&Object(S.jsx)(L,{temperature:Math.round(null!==(e=I.temperature.value)&&void 0!==e?e:NaN),temperatureUnit:"C",icon:I.icon,shortForecast:I.textDescription,updateTime:new Date(I.timestamp)})]})}function T(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(J,{})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),o(t),c(t)}))};c.a.render(Object(S.jsx)(a.a.StrictMode,{children:Object(S.jsx)(T,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)})),B()}},[[84,1,2]]]);
//# sourceMappingURL=main.665e534c.chunk.js.map