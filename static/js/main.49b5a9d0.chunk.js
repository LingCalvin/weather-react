(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(8),i=n.n(a),c=(n(84),n(19)),o=n(70),s=n(7),u=(n(85),n(13)),l=n.n(u),d=n(26),j=n(144),p=n(145),h=n(50),v=n(146),f=n(159),b=n(149),O=n(151),x=n(152),m=n(147),g=n(148),y=n(153),w=n(154),C=n(54),S=n(150);var k={getCurrentPosition:function(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}},E=n(33),F=n(44),P=n(45),I=n(65),H=n.n(I),T=n(18);function D(e,t){var n=Object(T.a)({},e);return t.forEach((function(e,t){t!==e&&n.hasOwnProperty(t)&&(n[e]=n[t],delete n[t])})),n}var M=new Map([["messageType","message_type"],["regionType","region_type"]]),N=new(function(){function e(t){Object(F.a)(this,e),this.apiClient=t}return Object(P.a)(e,[{key:"getActiveAlerts",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/alerts/active",{params:D(t,M)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPointInfo",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/points/".concat(t,",").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stationId,r=Object(E.a)(t,["stationId"]),e.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(H.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var U={setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem(e);return null===t?null:JSON.parse(t)}};function L(e,t){switch(t.type){case"updateForecast":return Object(T.a)(Object(T.a)({},e),t.payload)}}var R=n(158),K=n(139),A=n(2);function B(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.onClose,c=e.onRefreshClicked,o=e.onSettingsClicked;return Object(A.jsxs)(R.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:i,children:[Object(A.jsx)(K.a,{onClick:c,children:"Refresh"}),Object(A.jsx)(K.a,{onClick:o,children:"Settings"})]})}var W,_=n(140),G=Object(_.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},main:{overflowY:"auto",flexGrow:1},hourlyForecastTab:{display:"flex",flexDirection:"column",gap:e.spacing(1)},bottomNavigation:{borderTop:"1px solid",borderColor:e.palette.divider},tabPanel:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}})),J=n(141),z=n(142),X=n(143);function Y(e){var t=e.value;switch(e.unit){case W.Celsius:return"".concat(t,"\u2103");case W.Fahrenheit:return"".concat(t,"\u2109");case W.Kelvin:return"".concat(t,"\u212a");default:return"".concat(t)}}function V(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case W.Celsius:return{value:t+273.15,unit:W.Kelvin};case W.Fahrenheit:return{value:5*(t-32)/9+273.15,unit:W.Kelvin};case W.Kelvin:return{value:t,unit:n}}}(e).value;switch(t){case W.Celsius:return{value:n-273.15,unit:t};case W.Fahrenheit:return{value:9*(n-273.15)/5+32,unit:t};case W.Kelvin:return{value:n,unit:t}}}!function(e){e.Celsius="CELSIUS",e.Fahrenheit="FAHRENHEIT",e.Kelvin="KELVIN"}(W||(W={}));var $=Object(_.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}}}));function q(e){var t=e.temperature,n=e.time,r=e.icon,a=$();return Object(A.jsxs)("div",{className:a.root,children:[Object(A.jsx)(h.a,{children:n.toLocaleTimeString()}),Object(A.jsx)("img",{src:r,alt:""}),Object(A.jsx)(h.a,{variant:"h6",children:Y(t)})]})}var Q,Z=Object(_.a)((function(e){var t=e.spacing(2);return{gridList:{display:"grid",gridAutoFlow:"column",justifyItems:"center",gap:t},gridListContainer:{display:"flex",overflowX:"auto",paddingLeft:0,paddingRight:0},spacer:{display:"inline-block",minWidth:t}}}));function ee(e){var t=e.periods,n=Z();return Object(A.jsx)(J.a,{children:Object(A.jsxs)(z.a,{className:n.gridListContainer,children:[Object(A.jsx)("div",{className:n.spacer}),Object(A.jsx)("div",{className:n.gridList,children:t.map((function(e,n){var a=e.temperature,i=(e.temperatureUnit,e.startTime),c=e.icon;return Object(A.jsxs)(r.Fragment,{children:[Object(A.jsx)(q,{temperature:{value:a,unit:W.Fahrenheit},time:new Date(i),icon:c}),n!==t.length-1&&Object(A.jsx)(X.a,{orientation:"vertical"})]},i)}))}),Object(A.jsx)("div",{className:n.spacer})]})})}function te(e){var t=e.value;switch(e.unit){case Q.KilometersPerHour:return"".concat(t," km/h");case Q.MetersPerSecond:return"".concat(t," m/s");case Q.MilesPerHour:return"".concat(t," mph");default:return"".concat(t)}}function ne(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case Q.KilometersPerHour:return{value:t/3.6,unit:Q.MetersPerSecond};case Q.MetersPerSecond:return{value:t,unit:n};case Q.MilesPerHour:return{value:t/2.237,unit:Q.MetersPerSecond}}}(e).value;switch(t){case Q.KilometersPerHour:return{value:3.6*n,unit:t};case Q.MetersPerSecond:return{value:n,unit:t};case Q.MilesPerHour:return{value:2.237*n,unit:t}}}function re(e){var t=e.icon,n=e.shortForecast,r=e.temperature,a=e.windSpeed,i=e.relativeHumidity,c=e.updateTime,o=e.station;return Object(A.jsx)(J.a,{children:Object(A.jsxs)(z.a,{children:[Object(A.jsx)(h.a,{variant:"h5",children:n}),Object(A.jsxs)(f.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(A.jsx)("img",{alt:"",src:t}),Object(A.jsxs)(f.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[Object(A.jsx)(h.a,{variant:"h3",children:Y(r)}),void 0!==i&&Object(A.jsx)(h.a,{children:"Humidity: ".concat(Math.round(i),"%")}),void 0!==a&&Object(A.jsx)(h.a,{children:"Wind: ".concat(te(a))})]})]}),c&&Object(A.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(A.jsx)(h.a,{variant:"caption",children:c.toLocaleString()})}),c&&Object(A.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(A.jsx)(h.a,{variant:"caption",children:o})})]})})}function ae(e){var t=e.currentWeather,n=e.hourlyForecast,r=e.updateTime,a=e.station;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(re,{icon:t.icon,shortForecast:t.shortForecast,temperature:t.temperature,windSpeed:t.windSpeed,relativeHumidity:t.relativeHumidity,updateTime:r,station:a}),Object(A.jsx)(ee,{periods:n})]})}!function(e){e.KilometersPerHour="KILOMETERS_PER_HOUR",e.MetersPerSecond="METERS_PER_SECOND",e.MilesPerHour="MILES_PER_HOUR"}(Q||(Q={}));var ie=n(4),ce=n(40),oe={speedUnit:Q.MilesPerHour,temperatureUnit:W.Fahrenheit},se=Object(r.createContext)(oe);function ue(){var e;return null!==(e=U.getItem("cachedForecast"))&&void 0!==e?e:{location:null,city:null,state:null,forecast:null,hourlyForecast:null,stationId:null,observation:null}}function le(){return(le=Object(d.a)(l.a.mark((function e(t){var n,r,a,i,c,o,s,u,d,j,p,h,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getPointInfo(t.latitude,t.longitude);case 2:return n=e.sent,r=n.properties,a=r.relativeLocation.properties,i=a.city,c=a.state,o=r.gridId,s=r.gridX,u=r.gridY,e.next=12,N.getForecast({wfo:o,x:s,y:u});case 12:return d=e.sent,e.next=15,N.getHourlyForecast({wfo:o,x:s,y:u});case 15:return j=e.sent,e.next=18,N.getStations({wfo:o,x:s,y:u});case 18:return p=e.sent,h=p.features[0].properties.stationIdentifier,e.next=22,N.getStationObservations({stationId:h,limit:1});case 22:return v=e.sent,e.abrupt("return",{location:t,city:i,state:c,forecast:d,hourlyForecast:j,stationId:h,observation:v});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){var e,t,n,a,i,o=G(),u=Object(s.f)(),l=Object(r.useContext)(se),d=l.speedUnit,F=l.temperatureUnit,P=function(){var e=Object(r.useState)(window.navigator.onLine),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(!1)}function t(){a(!0)}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}(),I=Object(r.useState)(!1),H=Object(c.a)(I,2),D=H[0],M=H[1],N=Object(r.useReducer)(L,void 0,ue),R=Object(c.a)(N,2),K=R[0],_=R[1],J=K.location,z=K.city,X=K.state,Y=K.hourlyForecast,$=K.observation,q=K.stationId,Z=null!==(e=null===$||void 0===$?void 0:$.features[0].properties)&&void 0!==e?e:null,ee=Object(r.useCallback)((function(e){M(!0),function(e){return le.apply(this,arguments)}(e).then((function(e){return _({type:"updateForecast",payload:e})})).finally((function(){return M(!1)}))}),[]);Object(r.useEffect)((function(){J&&P&&ee(J)}),[P,J,ee]),a="cachedForecast",i=K,Object(r.useEffect)((function(){U.setItem(a,i)}),[a,i]);var te=new Date,re=new Date(te);re.setDate(re.getDate()+1),re.setHours(0,0,0,0);var oe,de,je=null===Y||void 0===Y?void 0:Y.properties.periods.filter((function(e){var t=e.endTime,n=e.startTime;return new Date(t)>te&&new Date(n)<re})),pe=Object(r.useState)(null),he=Object(c.a)(pe,2),ve=he[0],fe=he[1],be=Object(r.useState)("hourly"),Oe=Object(c.a)(be,2),xe=Oe[0],me=Oe[1];return Object(A.jsx)("div",{className:o.root,children:Object(A.jsxs)(C.a,{value:xe,children:[Object(A.jsx)(j.a,{position:"sticky",children:Object(A.jsxs)(p.a,{children:[Object(A.jsx)(h.a,{variant:"h6",children:z||X?"".concat(null!==z&&void 0!==z?z:"Unknown",", ").concat(null!==X&&void 0!==X?X:"Unknown"):"Unknown"}),Object(A.jsx)(v.a,{color:"inherit",onClick:function(){k.getCurrentPosition().then((function(e){var t=e.coords;_({type:"updateForecast",payload:{location:{latitude:t.latitude,longitude:t.longitude}}})}))},children:Object(A.jsx)(m.a,{})}),Object(A.jsx)(f.a,{className:o.spacer}),Object(A.jsx)(v.a,{color:"inherit",edge:"end",onClick:function(e){return fe(e.currentTarget)},children:Object(A.jsx)(g.a,{})})]})}),Object(A.jsx)(B,{anchorEl:ve,open:Boolean(ve),onClose:function(){return fe(null)},onRefreshClicked:function(){fe(null),J&&P&&ee(J)},onSettingsClicked:function(){fe(null),u.push(ce.SETTINGS)}}),D&&Object(A.jsx)(b.a,{color:"secondary"}),Object(A.jsxs)("main",{className:o.main,children:[Object(A.jsx)(S.a,{value:"hourly",className:Object(ie.a)(o.tabPanel,o.hourlyForecastTab),children:Z&&(null===je||void 0===je?void 0:je.length)&&Object(A.jsx)(ae,{updateTime:new Date(Z.timestamp),station:null!==q&&void 0!==q?q:"",currentWeather:{icon:Z.icon,shortForecast:Z.textDescription,temperature:(de={value:null!==(t=Z.temperature.value)&&void 0!==t?t:0,unit:W.Celsius},function(e){var t=e.value,n=Object(E.a)(e,["value"]);return Object(T.a)({value:Math.round(t)},n)}(V(de,F))),windSpeed:null!==Z.windSpeed.value?(oe={value:Z.windSpeed.value,unit:Q.KilometersPerHour},function(e){var t=e.value,n=Object(E.a)(e,["value"]);return Object(T.a)({value:Math.round(t)},n)}(ne(oe,d))):void 0,relativeHumidity:null!==(n=Z.relativeHumidity.value)&&void 0!==n?n:void 0},hourlyForecast:je})}),Object(A.jsx)(S.a,{value:"daily"})]}),Object(A.jsxs)(O.a,{value:xe,onChange:function(e,t){return me(t)},showLabels:!0,className:o.bottomNavigation,children:[Object(A.jsx)(x.a,{icon:Object(A.jsx)(y.a,{}),label:"Hourly",value:"hourly"}),Object(A.jsx)(x.a,{icon:Object(A.jsx)(w.a,{}),label:"Daily",value:"daily"})]})]})})}var je=n(138),pe=n(156),he=n(114),ve=n(157),fe=n(155);function be(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.children,c=e.onClose;return Object(A.jsx)(R.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:c,children:i})}var Oe=Object(r.createContext)((function(){}));function xe(e){switch(e){case Q.KilometersPerHour:return"Kilometers per hour";case Q.MetersPerSecond:return"Meters per second";case Q.MilesPerHour:return"Miles per hour"}}function me(e){switch(e){case W.Celsius:return"Celsius";case W.Fahrenheit:return"Fahrenheit";case W.Kelvin:return"Kelvin"}}var ge=Object(_.a)((function(e){return{listSubHeader:{color:e.palette.primary.main,fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,textAlign:"start"}}})),ye=Object.keys(Q).map((function(e){return Q[e]})),we=Object.keys(W).map((function(e){return W[e]}));function Ce(){var e=ge(),t=Object(s.f)(),n=Object(r.useContext)(Oe),a=Object(r.useState)(null),i=Object(c.a)(a,2),o=i[0],u=i[1],l=Object(r.useState)(null),d=Object(c.a)(l,2),f=d[0],b=d[1],O=Object(r.useContext)(se),x=O.speedUnit,m=O.temperatureUnit;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(j.a,{position:"sticky",children:Object(A.jsxs)(p.a,{children:[Object(A.jsx)(v.a,{edge:"start",color:"inherit",onClick:function(){return t.goBack()},children:Object(A.jsx)(fe.a,{})}),Object(A.jsx)(h.a,{variant:"h6",children:"Settings"})]})}),Object(A.jsx)(be,{anchorEl:o,open:Boolean(o),onClose:function(){return u(null)},children:ye.map((function(e){return Object(A.jsx)(K.a,{onClick:function(){n({speedUnit:e}),u(null)},children:xe(e)})}))}),Object(A.jsx)(be,{anchorEl:f,open:Boolean(f),onClose:function(){return b(null)},children:we.map((function(e){return Object(A.jsx)(K.a,{onClick:function(){n({temperatureUnit:e}),b(null)},children:me(e)})}))}),Object(A.jsxs)(je.a,{children:[Object(A.jsx)(pe.a,{inset:!0,className:e.listSubHeader,children:"Units"}),Object(A.jsx)(he.a,{button:!0,onClick:function(e){var t,n;return u(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(A.jsx)(ve.a,{inset:!0,primary:"Speed unit",secondary:xe(x)})}),Object(A.jsx)(he.a,{button:!0,onClick:function(e){var t,n;return b(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(A.jsx)(ve.a,{inset:!0,primary:"Temperature unit",secondary:me(m)})})]})]})}function Se(e,t){var n=t.type,r=t.update;switch(n){case"update":return Object(T.a)(Object(T.a)({},e),r)}}function ke(e){return"userPreferences::".concat(e)}var Ee=new(function(){function e(){Object(F.a)(this,e)}return Object(P.a)(e,[{key:"save",value:function(e,t){U.setItem(ke(e),t)}},{key:"load",value:function(e){var t;return null!==(t=U.getItem(ke(e)))&&void 0!==t?t:null}},{key:"loadOrDefault",value:function(e,t){var n;return null!==(n=U.getItem(ke(e)))&&void 0!==n?n:t}},{key:"loadAllOrDefault",value:function(){return{speedUnit:this.loadOrDefault("speedUnit",oe.speedUnit),temperatureUnit:this.loadOrDefault("temperatureUnit",oe.temperatureUnit)}}}]),e}());function Fe(){var e=Object(r.useReducer)(Se,Ee.loadAllOrDefault()),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(A.jsx)(se.Provider,{value:n,children:Object(A.jsx)(Oe.Provider,{value:function(e){Object.keys(e).forEach((function(t){Ee.save(t,e[t])})),a({type:"update",update:e})},children:Object(A.jsx)("div",{className:"App",children:Object(A.jsx)(o.a,{children:Object(A.jsxs)(s.c,{children:[Object(A.jsx)(s.a,{path:ce.DASHBOARD,exact:!0,children:Object(A.jsx)(de,{})}),Object(A.jsx)(s.a,{path:ce.SETTINGS,children:Object(A.jsx)(Ce,{})})]})})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};i.a.render(Object(A.jsx)(r.StrictMode,{children:Object(A.jsx)(Fe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Pe()},40:function(e){e.exports=JSON.parse('{"DASHBOARD":"/","SETTINGS":"/settings"}')},84:function(e,t,n){},85:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.49b5a9d0.chunk.js.map