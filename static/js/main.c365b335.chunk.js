(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(8),i=n.n(a),c=(n(84),n(19)),o=n(70),s=n(7),u=(n(85),n(13)),l=n.n(u),d=n(26),j=n(144),h=n(145),p=n(48),v=n(146),f=n(159),b=n(149),O=n(151),x=n(152),m=n(147),g=n(148),y=n(153),w=n(154),C=n(52),S=n(150);var k={getCurrentPosition:function(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}},F=n(33),I=n(63),E=n(64),P=n(65),H=n.n(P),T=n(18);function M(e,t){var n=Object(T.a)({},e);return t.forEach((function(e,t){t!==e&&n.hasOwnProperty(t)&&(n[e]=n[t],delete n[t])})),n}var N=new Map([["messageType","message_type"],["regionType","region_type"]]),L=new(function(){function e(t){Object(I.a)(this,e),this.apiClient=t}return Object(E.a)(e,[{key:"getActiveAlerts",value:function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/alerts/active",{params:M(t,N)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPointInfo",value:function(){var e=Object(d.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/points/".concat(t,",").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stationId,r=Object(F.a)(t,["stationId"]),e.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(H.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));var D={setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getItem:function(e){var t=localStorage.getItem(e);return null===t?null:JSON.parse(t)}};function R(e,t){switch(t.type){case"updateForecast":return Object(T.a)(Object(T.a)({},e),t.payload)}}function K(e,t){Object(r.useEffect)((function(){D.setItem(e,t)}),[e,t])}var U=n(158),A=n(139),B=n(2);function W(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.onClose,c=e.onRefreshClicked,o=e.onSettingsClicked;return Object(B.jsxs)(U.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:i,children:[Object(B.jsx)(A.a,{onClick:c,children:"Refresh"}),Object(B.jsx)(A.a,{onClick:o,children:"Settings"})]})}var _,G=n(140),J=Object(G.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},spacer:{flexGrow:1},main:{overflowY:"auto",flexGrow:1},hourlyForecastTab:{display:"flex",flexDirection:"column",gap:e.spacing(1)},bottomNavigation:{borderTop:"1px solid",borderColor:e.palette.divider},tabPanel:{paddingLeft:e.spacing(2),paddingRight:e.spacing(2)}}})),z=n(141),X=n(142),Y=n(143);function V(e){var t=e.value;switch(e.unit){case _.Celsius:return"".concat(t,"\u2103");case _.Fahrenheit:return"".concat(t,"\u2109");case _.Kelvin:return"".concat(t,"\u212a");default:return"".concat(t)}}function $(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case _.Celsius:return{value:t+273.15,unit:_.Kelvin};case _.Fahrenheit:return{value:5*(t-32)/9+273.15,unit:_.Kelvin};case _.Kelvin:return{value:t,unit:n}}}(e).value;switch(t){case _.Celsius:return{value:n-273.15,unit:t};case _.Fahrenheit:return{value:9*(n-273.15)/5+32,unit:t};case _.Kelvin:return{value:n,unit:t}}}!function(e){e.Celsius="CELSIUS",e.Fahrenheit="FAHRENHEIT",e.Kelvin="KELVIN"}(_||(_={}));var q=Object(G.a)((function(e){return{root:{display:"flex",flexDirection:"column",alignItems:"center",gap:e.spacing(1)}}}));function Q(e){var t=e.temperature,n=e.time,r=e.icon,a=q();return Object(B.jsxs)("div",{className:a.root,children:[Object(B.jsx)(p.a,{children:n.toLocaleTimeString()}),Object(B.jsx)("img",{src:r,alt:""}),Object(B.jsx)(p.a,{variant:"h6",children:V(t)})]})}var Z,ee=Object(G.a)((function(e){var t=e.spacing(2);return{gridList:{display:"grid",gridAutoFlow:"column",justifyItems:"center",gap:t},gridListContainer:{display:"flex",overflowX:"auto",paddingLeft:0,paddingRight:0},spacer:{display:"inline-block",minWidth:t}}}));function te(e){var t=e.periods,n=ee();return Object(B.jsx)(z.a,{children:Object(B.jsxs)(X.a,{className:n.gridListContainer,children:[Object(B.jsx)("div",{className:n.spacer}),Object(B.jsx)("div",{className:n.gridList,children:t.map((function(e,n){var a=e.temperature,i=(e.temperatureUnit,e.startTime),c=e.icon;return Object(B.jsxs)(r.Fragment,{children:[Object(B.jsx)(Q,{temperature:{value:a,unit:_.Fahrenheit},time:new Date(i),icon:c}),n!==t.length-1&&Object(B.jsx)(Y.a,{orientation:"vertical"})]},i)}))}),Object(B.jsx)("div",{className:n.spacer})]})})}function ne(e){var t=e.value;switch(e.unit){case Z.KilometersPerHour:return"".concat(t," km/h");case Z.MetersPerSecond:return"".concat(t," m/s");case Z.MilesPerHour:return"".concat(t," mph");default:return"".concat(t)}}function re(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case Z.KilometersPerHour:return{value:t/3.6,unit:Z.MetersPerSecond};case Z.MetersPerSecond:return{value:t,unit:n};case Z.MilesPerHour:return{value:t/2.237,unit:Z.MetersPerSecond}}}(e).value;switch(t){case Z.KilometersPerHour:return{value:3.6*n,unit:t};case Z.MetersPerSecond:return{value:n,unit:t};case Z.MilesPerHour:return{value:2.237*n,unit:t}}}function ae(e){var t=e.icon,n=e.shortForecast,r=e.temperature,a=e.windSpeed,i=e.relativeHumidity,c=e.updateTime,o=e.station;return Object(B.jsx)(z.a,{children:Object(B.jsxs)(X.a,{children:[Object(B.jsx)(p.a,{variant:"h5",children:n}),Object(B.jsxs)(f.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(B.jsx)("img",{alt:"",src:t}),Object(B.jsxs)(f.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[Object(B.jsx)(p.a,{variant:"h3",children:V(r)}),void 0!==i&&Object(B.jsx)(p.a,{children:"Humidity: ".concat(Math.round(i),"%")}),void 0!==a&&Object(B.jsx)(p.a,{children:"Wind: ".concat(ne(a))})]})]}),c&&Object(B.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(B.jsx)(p.a,{variant:"caption",children:c.toLocaleString()})}),c&&Object(B.jsx)(f.a,{display:"flex",justifyContent:"flex-end",children:Object(B.jsx)(p.a,{variant:"caption",children:o})})]})})}function ie(e){var t=e.currentWeather,n=e.hourlyForecast,r=e.updateTime,a=e.station;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(ae,{icon:t.icon,shortForecast:t.shortForecast,temperature:t.temperature,windSpeed:t.windSpeed,relativeHumidity:t.relativeHumidity,updateTime:r,station:a}),Object(B.jsx)(te,{periods:n})]})}!function(e){e.KilometersPerHour="KILOMETERS_PER_HOUR",e.MetersPerSecond="METERS_PER_SECOND",e.MilesPerHour="MILES_PER_HOUR"}(Z||(Z={}));var ce=n(4),oe=n(40),se={speedUnit:Z.MilesPerHour,temperatureUnit:_.Fahrenheit},ue=Object(r.createContext)(se);function le(){return{location:D.getItem("location"),city:D.getItem("city"),state:D.getItem("state"),forecast:D.getItem("forecast"),hourlyForecast:D.getItem("hourlyForecast"),stationId:D.getItem("stationId"),observation:D.getItem("observation")}}function de(){return(de=Object(d.a)(l.a.mark((function e(t){var n,r,a,i,c,o,s,u,d,j,h,p,v;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.getPointInfo(t.latitude,t.longitude);case 2:return n=e.sent,r=n.properties,a=r.relativeLocation.properties,i=a.city,c=a.state,o=r.gridId,s=r.gridX,u=r.gridY,e.next=12,L.getForecast({wfo:o,x:s,y:u});case 12:return d=e.sent,e.next=15,L.getHourlyForecast({wfo:o,x:s,y:u});case 15:return j=e.sent,e.next=18,L.getStations({wfo:o,x:s,y:u});case 18:return h=e.sent,p=h.features[0].properties.stationIdentifier,e.next=22,L.getStationObservations({stationId:p,limit:1});case 22:return v=e.sent,e.abrupt("return",{location:t,city:i,state:c,forecast:d,hourlyForecast:j,stationId:p,observation:v});case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){var e,t,n,a=J(),i=Object(s.f)(),o=Object(r.useContext)(ue),u=o.speedUnit,l=o.temperatureUnit,d=function(){var e=Object(r.useState)(window.navigator.onLine),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){function e(){a(!1)}function t(){a(!0)}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}(),I=Object(r.useState)(!1),E=Object(c.a)(I,2),P=E[0],H=E[1],M=Object(r.useReducer)(R,void 0,le),N=Object(c.a)(M,2),L=N[0],D=N[1],U=L.location,A=L.city,G=L.state,z=L.forecast,X=L.hourlyForecast,Y=L.observation,V=L.stationId,q=null!==(e=null===Y||void 0===Y?void 0:Y.features[0].properties)&&void 0!==e?e:null,Q=Object(r.useCallback)((function(e){H(!0),function(e){return de.apply(this,arguments)}(e).then((function(e){return D({type:"updateForecast",payload:e})})).finally((function(){return H(!1)}))}),[]);Object(r.useEffect)((function(){U&&d&&Q(U)}),[d,U,Q]),K("location",U),K("city",A),K("state",G),K("forecast",z),K("hourlyForecast",X),K("forecastState",L),K("station",V),K("observation",Y);var ee=new Date,te=new Date(ee);te.setDate(te.getDate()+1),te.setHours(0,0,0,0);var ne,ae,se=null===X||void 0===X?void 0:X.properties.periods.filter((function(e){var t=e.endTime,n=e.startTime;return new Date(t)>ee&&new Date(n)<te})),je=Object(r.useState)(null),he=Object(c.a)(je,2),pe=he[0],ve=he[1],fe=Object(r.useState)("hourly"),be=Object(c.a)(fe,2),Oe=be[0],xe=be[1];return Object(B.jsx)("div",{className:a.root,children:Object(B.jsxs)(C.a,{value:Oe,children:[Object(B.jsx)(j.a,{position:"sticky",children:Object(B.jsxs)(h.a,{children:[Object(B.jsx)(p.a,{variant:"h6",children:A||G?"".concat(null!==A&&void 0!==A?A:"Unknown",", ").concat(null!==G&&void 0!==G?G:"Unknown"):"Unknown"}),Object(B.jsx)(v.a,{color:"inherit",onClick:function(){k.getCurrentPosition().then((function(e){var t=e.coords;D({type:"updateForecast",payload:{location:{latitude:t.latitude,longitude:t.longitude}}})}))},children:Object(B.jsx)(m.a,{})}),Object(B.jsx)(f.a,{className:a.spacer}),Object(B.jsx)(v.a,{color:"inherit",edge:"end",onClick:function(e){return ve(e.currentTarget)},children:Object(B.jsx)(g.a,{})})]})}),Object(B.jsx)(W,{anchorEl:pe,open:Boolean(pe),onClose:function(){return ve(null)},onRefreshClicked:function(){ve(null),U&&d&&Q(U)},onSettingsClicked:function(){ve(null),i.push(oe.SETTINGS)}}),P&&Object(B.jsx)(b.a,{color:"secondary"}),Object(B.jsxs)("main",{className:a.main,children:[Object(B.jsx)(S.a,{value:"hourly",className:Object(ce.a)(a.tabPanel,a.hourlyForecastTab),children:q&&(null===se||void 0===se?void 0:se.length)&&Object(B.jsx)(ie,{updateTime:new Date(q.timestamp),station:null!==V&&void 0!==V?V:"",currentWeather:{icon:q.icon,shortForecast:q.textDescription,temperature:(ae={value:null!==(t=q.temperature.value)&&void 0!==t?t:0,unit:_.Celsius},function(e){var t=e.value,n=Object(F.a)(e,["value"]);return Object(T.a)({value:Math.round(t)},n)}($(ae,l))),windSpeed:null!==q.windSpeed.value?(ne={value:q.windSpeed.value,unit:Z.KilometersPerHour},function(e){var t=e.value,n=Object(F.a)(e,["value"]);return Object(T.a)({value:Math.round(t)},n)}(re(ne,u))):void 0,relativeHumidity:null!==(n=q.relativeHumidity.value)&&void 0!==n?n:void 0},hourlyForecast:se})}),Object(B.jsx)(S.a,{value:"daily"})]}),Object(B.jsxs)(O.a,{value:Oe,onChange:function(e,t){return xe(t)},showLabels:!0,className:a.bottomNavigation,children:[Object(B.jsx)(x.a,{icon:Object(B.jsx)(y.a,{}),label:"Hourly",value:"hourly"}),Object(B.jsx)(x.a,{icon:Object(B.jsx)(w.a,{}),label:"Daily",value:"daily"})]})]})})}var he=n(138),pe=n(156),ve=n(114),fe=n(157),be=n(155);function Oe(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.children,c=e.onClose;return Object(B.jsx)(U.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:c,children:i})}var xe=Object(r.createContext)((function(){}));function me(e){switch(e){case Z.KilometersPerHour:return"Kilometers per hour";case Z.MetersPerSecond:return"Meters per second";case Z.MilesPerHour:return"Miles per hour"}}function ge(e){switch(e){case _.Celsius:return"Celsius";case _.Fahrenheit:return"Fahrenheit";case _.Kelvin:return"Kelvin"}}var ye=Object(G.a)((function(e){return{listSubHeader:{color:e.palette.primary.main,fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,textAlign:"start"}}})),we=Object.keys(Z).map((function(e){return Z[e]})),Ce=Object.keys(_).map((function(e){return _[e]}));function Se(){var e=ye(),t=Object(s.f)(),n=Object(r.useContext)(xe),a=Object(r.useState)(null),i=Object(c.a)(a,2),o=i[0],u=i[1],l=Object(r.useState)(null),d=Object(c.a)(l,2),f=d[0],b=d[1],O=Object(r.useContext)(ue),x=O.speedUnit,m=O.temperatureUnit;return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(j.a,{position:"sticky",children:Object(B.jsxs)(h.a,{children:[Object(B.jsx)(v.a,{edge:"start",color:"inherit",onClick:function(){return t.goBack()},children:Object(B.jsx)(be.a,{})}),Object(B.jsx)(p.a,{variant:"h6",children:"Settings"})]})}),Object(B.jsx)(Oe,{anchorEl:o,open:Boolean(o),onClose:function(){return u(null)},children:we.map((function(e){return Object(B.jsx)(A.a,{onClick:function(){n({speedUnit:e}),u(null)},children:me(e)})}))}),Object(B.jsx)(Oe,{anchorEl:f,open:Boolean(f),onClose:function(){return b(null)},children:Ce.map((function(e){return Object(B.jsx)(A.a,{onClick:function(){n({temperatureUnit:e}),b(null)},children:ge(e)})}))}),Object(B.jsxs)(he.a,{children:[Object(B.jsx)(pe.a,{inset:!0,className:e.listSubHeader,children:"Units"}),Object(B.jsx)(ve.a,{button:!0,onClick:function(e){var t,n;return u(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(B.jsx)(fe.a,{inset:!0,primary:"Speed unit",secondary:me(x)})}),Object(B.jsx)(ve.a,{button:!0,onClick:function(e){var t,n;return b(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(B.jsx)(fe.a,{inset:!0,primary:"Temperature unit",secondary:ge(m)})})]})]})}function ke(e,t){var n=t.type,r=t.update;switch(n){case"update":return Object(T.a)(Object(T.a)({},e),r)}}function Fe(){var e=Object(r.useReducer)(ke,se),t=Object(c.a)(e,2),n=t[0],a=t[1];return Object(B.jsx)(ue.Provider,{value:n,children:Object(B.jsx)(xe.Provider,{value:function(e){return a({type:"update",update:e})},children:Object(B.jsx)("div",{className:"App",children:Object(B.jsx)(o.a,{children:Object(B.jsxs)(s.c,{children:[Object(B.jsx)(s.a,{path:oe.DASHBOARD,exact:!0,children:Object(B.jsx)(je,{})}),Object(B.jsx)(s.a,{path:oe.SETTINGS,children:Object(B.jsx)(Se,{})})]})})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,161)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};i.a.render(Object(B.jsx)(r.StrictMode,{children:Object(B.jsx)(Fe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Ie()},40:function(e){e.exports=JSON.parse('{"DASHBOARD":"/","SETTINGS":"/settings"}')},84:function(e,t,n){},85:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.c365b335.chunk.js.map