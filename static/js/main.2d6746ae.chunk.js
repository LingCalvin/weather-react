(this["webpackJsonpweather-react"]=this["webpackJsonpweather-react"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},136:function(e,t,n){"use strict";n.r(t);var r,a,i,c,o,u=n(0),s=n(13),l=n.n(s),d=(n(110),n(15)),p=n(90),f=n(12),h=(n(111),n(10)),j=n.n(h),v=n(25),b=n(14),m=n(19),O=n(186),g=n(188),x=n(189),y=n(190),w=n(191),S=n(66),C=n(187),T=n(34),k=n(42),P=n(54),E=n.n(P);!function(e){e.Inch="INCH",e.Meter="METER",e.Mile="MILE",e.Kilometer="KILOMETER"}(r||(r={})),function(e){e[e.Daily=0]="Daily",e[e.Hourly=1]="Hourly"}(a||(a={})),function(e){e.Pascal="PASCAL",e.NewtonPerSquareMeter="NEWTON_PER_SQUARE_METER",e.PoundsPerSquareInch="POUNDS_PER_SQUARE_INCH",e.Bar="BAR"}(i||(i={})),function(e){e.KilometersPerHour="KILOMETERS_PER_HOUR",e.MetersPerSecond="METERS_PER_SECOND",e.MilesPerHour="MILES_PER_HOUR"}(c||(c={})),function(e){e.Celsius="CELSIUS",e.Fahrenheit="FAHRENHEIT",e.Kelvin="KELVIN"}(o||(o={}));var I=n(55),F=n(83),H=n(92),D=n(93),L=function(e){Object(F.a)(n,e);var t=Object(H.a)(n);function n(e){var r;return Object(T.a)(this,n),(r=t.call(this,"Unexpected unit code: ".concat(e))).unitCode=e,Error.captureStackTrace&&Error.captureStackTrace(Object(I.a)(r),n),r.name="UnexpectedUnitCodeException",r}return n}(Object(D.a)(Error)),M=new(function(){function e(t){Object(T.a)(this,e),this.apiClient=t}return Object(k.a)(e,[{key:"getPointInfoRaw",value:function(){var e=Object(m.a)(j.a.mark((function e(t,n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/points/".concat(t,",").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getPointInfo",value:function(){var e=Object(m.a)(j.a.mark((function e(t,n){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPointInfoRaw(t,n);case 2:return r=e.sent,e.abrupt("return",{coordinates:[r.geometry.coordinates[0],r.geometry.coordinates[1]],gridId:r.properties.gridId,gridX:r.properties.gridX,gridY:r.properties.gridY,timeZone:r.properties.timeZone,radarStation:r.properties.timeZone,relativeLocation:{city:r.properties.relativeLocation.properties.city,state:r.properties.relativeLocation.properties.state}});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRawForecast",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getForecast",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,this.getRawForecast(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawHourlyForecast",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/forecast/hourly"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getHourlyForecast",value:function(){var e=Object(m.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=R,e.next=3,this.getRawHourlyForecast(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawStations",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.wfo,r=t.x,a=t.y,e.next=3,this.apiClient.get("/gridpoints/".concat(n,"/").concat(r,",").concat(a,"/stations"));case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStations",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRawStations(t);case 2:return n=e.sent,r=n.features,e.abrupt("return",r.map((function(e){var t=e.properties;return{id:t.stationIdentifier,name:t.name,timeZone:t.timeZone}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRawStationObservations",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stationId,r=Object(v.a)(t,["stationId"]),e.next=3,this.apiClient.get("/stations/".concat(n,"/observations"),{params:r});case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStationObservations",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getRawStationObservations(t);case 2:return n=e.sent,r=n.features,e.abrupt("return",r.map((function(e){var t,n=e.properties;return{station:n.station,timestamp:new Date(n.timestamp),description:n.textDescription,icon:n.icon,temperature:B(n.temperature),windDirection:null!==(t=n.windDirection.value)&&void 0!==t?t:void 0,windSpeed:K(n.windSpeed),windGust:K(n.windGust),barometricPressure:_(n.barometricPressure),seaLevelPressure:_(n.seaLevelPressure),visibility:U(n.visibility),maxTemperatureLast24Hours:B(n.maxTemperatureLast24Hours),minTemperatureLast24Hours:B(n.minTemperatureLast24Hours),precipitationLastHour:U(n.precipitationLastHour),precipitationLast3Hours:U(n.precipitationLast3Hours),precipitationLast6Hours:U(n.precipitationLast6Hours),relativeHumidity:A(n.relativeHumidity),windChill:B(n.windChill),heatIndex:B(n.heatIndex)}})));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(E.a.create({baseURL:"https://api.weather.gov",headers:{Accept:"application/geo+json"}}));function N(e){return{name:e.name,startTime:new Date(e.startTime),endTime:new Date(e.endTime),isDayTime:e.isDaytime,temperature:B({value:e.temperature,unitCode:e.temperatureUnit}),icon:e.icon,shortForecast:e.shortForecast,detailedForecast:e.detailedForecast}}function R(e){var t=e.properties;return{updatedTime:new Date(t.updateTime),type:a.Daily,periods:t.periods.map(N)}}function U(e){var t=e.value,n=e.unitCode;if(null!==t){if("unit:in"===n)return{value:t,unit:r.Inch};if("unit:m"===n)return{value:t,unit:r.Meter};if("unit:km"===n)return{value:t,unit:r.Kilometer};throw new L(n)}}function A(e){var t=e.value,n=e.unitCode;if(null!==t){if("unit:percent"===n)return t;throw new L(n)}}function K(e){var t=e.value,n=e.unitCode;if(null!==t){if("unit:km_h-1"===n)return{value:t,unit:c.KilometersPerHour};throw new L(n)}}function B(e){var t=e.value,n=e.unitCode;if(null!==t){if("C"===n||"unit:degC"===n)return{value:t,unit:o.Celsius};if("F"===n)return{value:t,unit:o.Fahrenheit};if("K"===n)return{value:t,unit:o.Kelvin};throw new L(n)}}function _(e){var t=e.value,n=e.unitCode;if(null!==t){if("unit:Pa"===n)return{value:t,unit:i.Pascal};throw new L(n)}}var W={setItem:function(e,t){localStorage.setItem(e,JSON.stringify(t))},getItem:function(e,t){var n=localStorage.getItem(e);return null===n?null:JSON.parse(n,t)}};function G(e,t){switch(t.type){case"updateForecast":return Object(b.a)(Object(b.a)({},e),t.payload)}}var J=n(91),Z=n(172),Y=n(2);function z(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.onClose,c=e.onRefreshClicked,o=e.onSettingsClicked;return Object(Y.jsxs)(J.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:i,children:[Object(Y.jsx)(Z.a,{onClick:c,children:"Refresh"}),Object(Y.jsx)(Z.a,{onClick:o,children:"Settings"})]})}var X=n(173),q=Object(X.a)((function(e){return{root:{height:"100%",display:"flex",flexDirection:"column"},main:{overflowY:"auto",flexGrow:1},hourlyForecastPage:{display:"flex",flexDirection:"column",gap:e.spacing(1)},bottomNavigation:{borderTop:"1px solid",borderColor:e.palette.divider,minHeight:"56px"}}})),Q=n(53),V=n(174);function $(e){var t=e.skeletonProps,n=e.className,r=Object(v.a)(e,["skeletonProps","className"]),a=Object(u.useRef)(null),i=Object(u.useState)(!1),c=Object(d.a)(i,2),o=c[0],s=c[1];return Object(u.useLayoutEffect)((function(){null!==a.current&&(console.log(a.current.complete),a.current.complete?s(!0):(a.current.onload=function(){return s(!0)},a.current.onerror=function(){return s(!0)}))}),[]),Object(Y.jsxs)(Y.Fragment,{children:[!o&&Object(Y.jsx)(V.a,Object(b.a)({className:n,style:{backgroundColor:"pink"},variant:"rect"},t)),Object(Y.jsx)("img",Object(b.a)({ref:a,className:n,style:{display:o?void 0:"none"}},r))]})}var ee,te=Object(X.a)((function(e){return{root:{display:"grid",alignItems:"center",gridTemplateColumns:"repeat(4, auto)",gap:e.spacing(1)},temperature:{fontWeight:"bold"}}}));function ne(e){var t=e.value;switch(e.unit){case o.Celsius:return"".concat(t,"\u2103");case o.Fahrenheit:return"".concat(t,"\u2109");case o.Kelvin:return"".concat(t,"\u212a");default:return"".concat(t)}}function re(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case o.Celsius:return{value:t+273.15,unit:o.Kelvin};case o.Fahrenheit:return{value:5*(t-32)/9+273.15,unit:o.Kelvin};case o.Kelvin:return{value:t,unit:n}}}(e).value;switch(t){case o.Celsius:return{value:n-273.15,unit:t};case o.Fahrenheit:return{value:9*(n-273.15)/5+32,unit:t};case o.Kelvin:return{value:n,unit:t}}}function ae(e){var t=e.forecast,n=te();return Object(Y.jsx)("div",{className:n.root,children:t.map((function(e){var t=e.startTime,r=e.icon,a=e.shortForecast,i=e.temperature;return Object(Y.jsxs)(u.Fragment,{children:[Object(Y.jsx)(Q.a,{className:n.temperature,children:t.toLocaleTimeString(void 0,{hour:"numeric"})}),Object(Y.jsx)($,{src:r,alt:"",height:ee.Small,width:ee.Small,skeletonProps:{height:ee.Small,width:ee.Small}}),Object(Y.jsx)(Q.a,{children:a}),Object(Y.jsx)(Q.a,{children:ne(i)})]},t.toISOString())}))})}!function(e){e[e.Small=56]="Small",e[e.Medium=86]="Medium",e[e.large=134]="large"}(ee||(ee={}));var ie=n(175),ce=n(176),oe=n(194);function ue(e){var t=e.value;switch(e.unit){case c.KilometersPerHour:return"".concat(t," km/h");case c.MetersPerSecond:return"".concat(t," m/s");case c.MilesPerHour:return"".concat(t," mph");default:return"".concat(t)}}function se(e,t){var n=function(e){var t=e.value,n=e.unit;switch(n){case c.KilometersPerHour:return{value:t/3.6,unit:c.MetersPerSecond};case c.MetersPerSecond:return{value:t,unit:n};case c.MilesPerHour:return{value:t/2.237,unit:c.MetersPerSecond}}}(e).value;switch(t){case c.KilometersPerHour:return{value:3.6*n,unit:t};case c.MetersPerSecond:return{value:n,unit:t};case c.MilesPerHour:return{value:2.237*n,unit:t}}}var le=Object(X.a)({icon:{alignSelf:"flex-start"}});function de(e){var t=e.icon,n=e.shortForecast,r=e.temperature,a=e.windSpeed,i=e.relativeHumidity,c=e.updateTime,o=e.station,u=le();return Object(Y.jsx)(ie.a,{children:Object(Y.jsxs)(ce.a,{children:[Object(Y.jsx)(Q.a,{variant:"h5",children:n}),Object(Y.jsxs)(oe.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(Y.jsx)($,{className:u.icon,alt:"",src:t,height:ee.Medium,width:ee.Medium,skeletonProps:{height:ee.Medium,width:ee.Medium}}),Object(Y.jsxs)(oe.a,{display:"flex",flexDirection:"column",alignItems:"flex-end",children:[Object(Y.jsx)(Q.a,{variant:"h3",children:ne(r)}),void 0!==i&&Object(Y.jsx)(Q.a,{children:"Humidity: ".concat(Math.round(i),"%")}),void 0!==a&&Object(Y.jsx)(Q.a,{children:"Wind: ".concat(ue(a))}),c&&Object(Y.jsx)(oe.a,{display:"flex",justifyContent:"flex-end",children:Object(Y.jsx)(Q.a,{variant:"caption",children:c.toLocaleString()})}),c&&Object(Y.jsx)(oe.a,{display:"flex",justifyContent:"flex-end",children:Object(Y.jsx)(Q.a,{variant:"caption",children:o})})]})]})]})})}function pe(e){var t=e.currentWeather,n=e.hourlyForecast,r=e.updateTime,a=e.station,i=e.className;return Object(Y.jsxs)("div",{className:i,children:[Object(Y.jsx)(de,{icon:t.icon,shortForecast:t.shortForecast,temperature:t.temperature,windSpeed:t.windSpeed,relativeHumidity:t.relativeHumidity,updateTime:r,station:a}),Object(Y.jsx)(ae,{forecast:n})]})}var fe=n(52),he={speedUnit:c.MilesPerHour,temperatureUnit:o.Fahrenheit},je=Object(u.createContext)(he),ve=Object(X.a)((function(e){return{root:{display:"flex",flexDirection:"column",gap:e.spacing(2)},forecastTile:{display:"grid",gridTemplateAreas:'\n    "forecastTileTitle forecastTileTitle forecastTileTitle"\n    "forecastTileIcon forecastTileDescription forecastTileTemperature"\n    ',alignItems:"center",columnGap:e.spacing(1)},forecastTileTitle:{gridArea:"forecastTileTitle",justifySelf:"start"},forecastTileIcon:{gridArea:"forecastTileIcon"},forecastTileDescription:{gridArea:"forecastTileDescription"},forecastTileTemperature:{gridArea:"forecastTileTemperature",justifySelf:"end"}}}));function be(e){var t=e.forecast,n=ve();return Object(Y.jsx)("div",{className:n.root,children:t.map((function(e){return Object(Y.jsxs)("div",{className:n.forecastTile,children:[Object(Y.jsx)(Q.a,{className:n.forecastTileTitle,variant:"h6",children:e.name}),Object(Y.jsx)($,{className:n.forecastTileIcon,src:e.icon,alt:"",height:ee.Medium,width:ee.Medium,skeletonProps:{height:ee.Medium,width:ee.Medium}}),Object(Y.jsx)(Q.a,{className:n.forecastTileDescription,children:e.shortForecast}),Object(Y.jsx)(Q.a,{variant:"h6",className:n.forecastTileTemperature,children:ne(e.temperature)})]},e.startTime.toISOString())}))})}var me=n(180),Oe=n(181),ge=n(178),xe=n(182),ye=n(183),we=n(184),Se=n(185),Ce=n(193),Te=n(179),ke=n(195);var Pe=new(function(){function e(t){Object(T.a)(this,e),this.apiClient=t}return Object(k.a)(e,[{key:"suggest",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/suggest",{params:t});case 2:return n=e.sent,r=n.data.suggestions,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findAddressCandidates",value:function(){var e=Object(m.a)(j.a.mark((function e(t){var n,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.apiClient.get("/findAddressCandidates",{params:t});case 2:return n=e.sent,r=n.data.candidates,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())(E.a.create({baseURL:"https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",paramsSerializer:function(e){return new URLSearchParams(e).toString()}}));function Ee(e){var t=e.suggestParams,n=e.startAdornment,r=e.autocompleteProps,a=e.autoFocus,i=e.placeholder,c=e.onSelectionChange,o=Object(u.useState)(null),s=Object(d.a)(o,2),l=s[0],p=s[1],f=Object(u.useState)(""),h=Object(d.a)(f,2),j=h[0],v=h[1],m=Object(u.useState)([]),O=Object(d.a)(m,2),g=O[0],x=O[1],y=function(e,t){var n=Object(u.useState)(e),r=Object(d.a)(n,2),a=r[0],i=r[1],c=Object(u.useRef)(Date.now());return Object(u.useEffect)((function(){var n=setTimeout((function(){i(e),c.current=Date.now()}),t-(Date.now()-c.current));return function(){return clearTimeout(n)}}),[e,t]),a}(j,100),w=Object(u.useRef)("");return Object(u.useEffect)((function(){y.length>0&&"input"===w.current?Pe.suggest(Object(b.a)({text:y,f:"json"},t)).then((function(e){return x(e)})):x([])}),[y,t]),Object(Y.jsx)(ke.a,Object(b.a)({options:g,getOptionLabel:function(e){return e.text},getOptionSelected:function(e,t){return e.isCollection===t.isCollection&&e.magicKey===t.magicKey&&e.text===t.text},inputValue:j,onInputChange:function(e,t,n){w.current=n,v(t)},value:l,onChange:function(e,t){p(t),Pe.findAddressCandidates({f:"json",SingeLine:null===t||void 0===t?void 0:t.text,magicKey:null===t||void 0===t?void 0:t.magicKey,maxLocations:1,outFields:["City","RegionAbbr"]}).then((function(e){return null===c||void 0===c?void 0:c(e[0])}))},renderInput:function(e){return Object(Y.jsx)(Ce.a,Object(b.a)(Object(b.a)({},e),{},{InputProps:Object(b.a)(Object(b.a)({},e.InputProps),{},{startAdornment:n?Object(Y.jsx)(Te.a,{position:"start",children:n}):void 0}),autoFocus:a,placeholder:i}))}},r))}var Ie={getCurrentPosition:function(){return new Promise((function(e,t){return navigator.geolocation.getCurrentPosition(e,t)}))}},Fe=Object(X.a)((function(e){return{searchContainer:{backgroundColor:e.palette.background.paper,width:"100%",padding:"".concat(e.spacing(.5),"px ").concat(e.spacing(1),"px"),display:"flex",alignItems:"center",gap:e.spacing(1),borderRadius:e.shape.borderRadius,flexGrow:1},searchOrLocateContainer:{width:"100%",display:"flex",alignItems:"center",gap:e.spacing(1)},searchExitButton:{padding:0},spacer:{flexGrow:1}}}));function He(e){var t=e.location,n=e.onShowMenu,r=e.onLocationChange,a=Fe(),i=Object(u.useState)(!1),c=Object(d.a)(i,2),o=c[0],s=c[1];return Object(Y.jsx)(me.a,{position:"sticky",children:Object(Y.jsx)(Oe.a,{children:o?Object(Y.jsxs)("div",{className:a.searchOrLocateContainer,children:[Object(Y.jsx)("div",{className:a.searchContainer,children:Object(Y.jsx)(Ee,{autoFocus:!0,placeholder:"Search location",autocompleteProps:{autoHighlight:!0,fullWidth:!0},startAdornment:Object(Y.jsx)(ge.a,{className:a.searchExitButton,onClick:function(){return s(!1)},children:Object(Y.jsx)(we.a,{})}),suggestParams:{category:["Postal","Populated Place"],countryCode:"USA"},onSelectionChange:function(e){var t=e.location,n=t.x,a=t.y;s(!1),null===r||void 0===r||r(a,n)}})}),Object(Y.jsx)(ge.a,{color:"inherit",className:a.searchExitButton,onClick:function(){s(!1),r&&Ie.getCurrentPosition().then((function(e){var t=e.coords;r(t.latitude,t.longitude)}))},children:Object(Y.jsx)(Se.a,{})})]}):Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Q.a,{variant:"h6",children:null!==t&&void 0!==t?t:"Unknown"}),Object(Y.jsx)(ge.a,{color:"inherit",onClick:function(){return s(!0)},children:Object(Y.jsx)(xe.a,{})}),Object(Y.jsx)(oe.a,{className:a.spacer}),Object(Y.jsx)(ge.a,{color:"inherit",edge:"end",onClick:n,children:Object(Y.jsx)(ye.a,{})})]})})})}function De(){var e;return null!==(e=W.getItem("cachedForecast",(function(e,t){var n=e.toLocaleUpperCase();return n.includes("TIME")||n.includes("DATE")?new Date(t):t})))&&void 0!==e?e:{location:null,city:null,state:null,forecast:null,hourlyForecast:null,stationId:null,observations:null}}function Le(){return(Le=Object(m.a)(j.a.mark((function e(t){var n,r,a,i,c,o,u,s,l,d,p,f;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.getPointInfo(t.latitude,t.longitude);case 2:return n=e.sent,r=n.relativeLocation,a=r.city,i=r.state,c=n.gridId,o=n.gridX,u=n.gridY,e.next=11,M.getForecast({wfo:c,x:o,y:u});case 11:return s=e.sent,e.next=14,M.getHourlyForecast({wfo:c,x:o,y:u});case 14:return l=e.sent,e.next=17,M.getStations({wfo:c,x:o,y:u});case 17:return d=e.sent,p=d[0].id,e.next=21,M.getStationObservations({stationId:p,limit:1});case 21:return f=e.sent,e.abrupt("return",{location:t,city:a,state:i,forecast:s,hourlyForecast:l,stationId:p,observations:f});case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){var e,t,n,r,a,i,s=q(),l=Object(f.f)(),p=Object(u.useContext)(je),h=p.speedUnit,j=p.temperatureUnit,m=function(){var e=Object(u.useState)(window.navigator.onLine),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(u.useEffect)((function(){function e(){r(!1)}function t(){r(!0)}return window.addEventListener("offline",e),window.addEventListener("online",t),function(){window.removeEventListener("offline",e),window.removeEventListener("online",t)}}),[]),n}(),T=Object(u.useState)(!1),k=Object(d.a)(T,2),P=k[0],E=k[1],I=Object(u.useReducer)(G,void 0,De),F=Object(d.a)(I,2),H=F[0],D=F[1],L=H.location,M=H.city,N=H.state,R=H.forecast,U=H.hourlyForecast,A=H.observations,K=H.stationId,B=null!==(e=null===A||void 0===A?void 0:A[0])&&void 0!==e?e:null,_=Object(u.useCallback)((function(e){E(!0),function(e){return Le.apply(this,arguments)}(e).then((function(e){return D({type:"updateForecast",payload:e})})).finally((function(){return E(!1)}))}),[]);Object(u.useEffect)((function(){L&&m&&_(L)}),[m,L,_]),a="cachedForecast",i=H,Object(u.useEffect)((function(){W.setItem(a,i)}),[a,i]);var J=Object(u.useCallback)((function(e){return function(e){var t=e.value,n=Object(v.a)(e,["value"]);return Object(b.a)({value:Math.round(t)},n)}(re(e,j))}),[j]),Z=Object(u.useCallback)((function(e){return Object(b.a)(Object(b.a)({},e),{},{periods:e.periods.map((function(e){var t=e.temperature,n=Object(v.a)(e,["temperature"]);return Object(b.a)({temperature:J(t)},n)}))})}),[J]),X=Object(u.useMemo)((function(){return null!==R?Z(R):null}),[R,Z]),Q=Object(u.useMemo)((function(){return null!==U?Z(U):null}),[U,Z]),V=new Date,$=new Date(V);$.setDate($.getDate()+1),$.setHours(0,0,0,0);var ee,te=null===Q||void 0===Q?void 0:Q.periods.filter((function(e){var t=e.endTime,n=e.startTime;return new Date(t)>V&&new Date(n)<$})).map((function(e){var t=e.temperature,n=Object(v.a)(e,["temperature"]);return Object(b.a)({temperature:J(t)},n)})),ne=Object(u.useState)(null),ae=Object(d.a)(ne,2),ie=ae[0],ce=ae[1],oe=Object(u.useState)("hourly"),ue=Object(d.a)(oe,2),le=ue[0],de=ue[1];return Object(Y.jsx)("div",{className:s.root,children:Object(Y.jsxs)(S.a,{value:le,children:[Object(Y.jsx)(He,{location:M||N?"".concat(null!==M&&void 0!==M?M:"Unknown",", ").concat(null!==N&&void 0!==N?N:"Unknown"):void 0,onShowMenu:function(e){return ce(e.currentTarget)},onLocationChange:function(e,t){D({type:"updateForecast",payload:{location:{latitude:e,longitude:t}}})}}),Object(Y.jsx)(z,{anchorEl:ie,open:Boolean(ie),onClose:function(){return ce(null)},onRefreshClicked:function(){ce(null),L&&m&&_(L)},onSettingsClicked:function(){ce(null),l.push(fe.SETTINGS)}}),P&&Object(Y.jsx)(O.a,{color:"secondary"}),Object(Y.jsxs)("main",{className:s.main,children:[Object(Y.jsx)(C.a,{value:"hourly",children:B&&(null===te||void 0===te?void 0:te.length)&&Object(Y.jsx)(pe,{className:s.hourlyForecastPage,updateTime:new Date(B.timestamp),station:null!==K&&void 0!==K?K:"",currentWeather:{icon:B.icon,shortForecast:B.description,temperature:J({value:null!==(t=null===(n=B.temperature)||void 0===n?void 0:n.value)&&void 0!==t?t:0,unit:o.Celsius}),windSpeed:void 0!==(null===B||void 0===B?void 0:B.windSpeed)?(ee={value:B.windSpeed.value,unit:c.KilometersPerHour},function(e){var t=e.value,n=Object(v.a)(e,["value"]);return Object(b.a)({value:Math.round(t)},n)}(se(ee,h))):void 0,relativeHumidity:B.relativeHumidity},hourlyForecast:te})}),Object(Y.jsx)(C.a,{value:"daily",children:Object(Y.jsx)(be,{forecast:null!==(r=null===X||void 0===X?void 0:X.periods)&&void 0!==r?r:[]})})]}),Object(Y.jsxs)(g.a,{value:le,onChange:function(e,t){return de(t)},showLabels:!0,className:s.bottomNavigation,children:[Object(Y.jsx)(x.a,{icon:Object(Y.jsx)(y.a,{}),label:"Hourly",value:"hourly"}),Object(Y.jsx)(x.a,{icon:Object(Y.jsx)(w.a,{}),label:"Daily",value:"daily"})]})]})})}var Ne=n(171),Re=n(177),Ue=n(138),Ae=n(192);function Ke(e){var t=e.open,n=void 0!==t&&t,r=e.anchorEl,a=e.anchorOrigin,i=e.children,c=e.onClose;return Object(Y.jsx)(J.a,{open:n,anchorEl:r,anchorOrigin:a,onClose:c,children:i})}var Be=Object(u.createContext)((function(){}));function _e(e){switch(e){case c.KilometersPerHour:return"Kilometers per hour";case c.MetersPerSecond:return"Meters per second";case c.MilesPerHour:return"Miles per hour"}}function We(e){switch(e){case o.Celsius:return"Celsius";case o.Fahrenheit:return"Fahrenheit";case o.Kelvin:return"Kelvin"}}var Ge=Object(X.a)((function(e){return{listSubHeader:{color:e.palette.primary.main,fontSize:e.typography.body1.fontSize,fontWeight:e.typography.body1.fontWeight,textAlign:"start"}}})),Je=Object.keys(c).map((function(e){return c[e]})),Ze=Object.keys(o).map((function(e){return o[e]}));function Ye(){var e=Ge(),t=Object(f.f)(),n=Object(u.useContext)(Be),r=Object(u.useState)(null),a=Object(d.a)(r,2),i=a[0],c=a[1],o=Object(u.useState)(null),s=Object(d.a)(o,2),l=s[0],p=s[1],h=Object(u.useContext)(je),j=h.speedUnit,v=h.temperatureUnit;return Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(me.a,{position:"sticky",children:Object(Y.jsxs)(Oe.a,{children:[Object(Y.jsx)(ge.a,{edge:"start",color:"inherit",onClick:function(){return t.goBack()},children:Object(Y.jsx)(we.a,{})}),Object(Y.jsx)(Q.a,{variant:"h6",children:"Settings"})]})}),Object(Y.jsx)(Ke,{anchorEl:i,open:Boolean(i),onClose:function(){return c(null)},children:Je.map((function(e){return Object(Y.jsx)(Z.a,{onClick:function(){n({speedUnit:e}),c(null)},children:_e(e)},e)}))}),Object(Y.jsx)(Ke,{anchorEl:l,open:Boolean(l),onClose:function(){return p(null)},children:Ze.map((function(e){return Object(Y.jsx)(Z.a,{onClick:function(){n({temperatureUnit:e}),p(null)},children:We(e)},e)}))}),Object(Y.jsxs)(Ne.a,{children:[Object(Y.jsx)(Re.a,{inset:!0,className:e.listSubHeader,children:"Units"}),Object(Y.jsx)(Ue.a,{button:!0,onClick:function(e){var t,n;return c(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(Y.jsx)(Ae.a,{inset:!0,primary:"Speed unit",secondary:_e(j)})}),Object(Y.jsx)(Ue.a,{button:!0,onClick:function(e){var t,n;return p(null!==(t=null===(n=e.currentTarget.firstElementChild)||void 0===n?void 0:n.firstElementChild)&&void 0!==t?t:null)},children:Object(Y.jsx)(Ae.a,{inset:!0,primary:"Temperature unit",secondary:We(v)})})]})]})}function ze(e,t){var n=t.type,r=t.update;switch(n){case"update":return Object(b.a)(Object(b.a)({},e),r)}}function Xe(e){return"userPreferences::".concat(e)}var qe=new(function(){function e(){Object(T.a)(this,e)}return Object(k.a)(e,[{key:"save",value:function(e,t){W.setItem(Xe(e),t)}},{key:"load",value:function(e){var t;return null!==(t=W.getItem(Xe(e)))&&void 0!==t?t:null}},{key:"loadOrDefault",value:function(e,t){var n;return null!==(n=W.getItem(Xe(e)))&&void 0!==n?n:t}},{key:"loadAllOrDefault",value:function(){return{speedUnit:this.loadOrDefault("speedUnit",he.speedUnit),temperatureUnit:this.loadOrDefault("temperatureUnit",he.temperatureUnit)}}}]),e}());function Qe(){var e=Object(u.useReducer)(ze,qe.loadAllOrDefault()),t=Object(d.a)(e,2),n=t[0],r=t[1];return Object(Y.jsx)(je.Provider,{value:n,children:Object(Y.jsx)(Be.Provider,{value:function(e){Object.keys(e).forEach((function(t){qe.save(t,e[t])})),r({type:"update",update:e})},children:Object(Y.jsx)("div",{className:"App",children:Object(Y.jsx)(p.a,{children:Object(Y.jsxs)(f.c,{children:[Object(Y.jsx)(f.a,{path:fe.DASHBOARD,exact:!0,children:Object(Y.jsx)(Me,{})}),Object(Y.jsx)(f.a,{path:fe.SETTINGS,children:Object(Y.jsx)(Ye,{})})]})})})})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};l.a.render(Object(Y.jsx)(u.StrictMode,{children:Object(Y.jsx)(Qe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),Ve()},52:function(e){e.exports=JSON.parse('{"DASHBOARD":"/","SETTINGS":"/settings"}')}},[[136,1,2]]]);
//# sourceMappingURL=main.2d6746ae.chunk.js.map